"use strict";(self.webpackChunk_kne_components_super_select=self.webpackChunk_kne_components_super_select||[]).push([[830],{71830:(e,t,l)=>{l.r(t),l.d(t,{SelectInput:()=>Z,SelectTableList:()=>Me,SelectTree:()=>tt,SelectedAll:()=>G,SelectedTagList:()=>re,default:()=>ye});var a=l(94922),n=l.n(a),r=l(74946),s=l(50805),c=l(7717),o=l(54159),i=l.n(o),p=l(92679),m=l.n(p),u=l(15060),d=l.n(u),h=l(28833),g=l(7671),f=l(7693),E=l(86340),b=l(67823),v=l(20274),y=l(33227),C=l.n(y),N=l(20046),_=(l(1251),l(41792)),S=l(83428),x=(l(41781),l(73075)),A=l.n(x),k=l(33076),O=l.n(k),w=l(16052),P=l.n(w);function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},K.apply(null,arguments)}function I(e,t){if(null==e)return{};var l={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;l[a]=e[a]}return l}const T=(0,r.createContext)(),{Provider:j,useContext:R}=T;var L="_d8lGc",V="_3kjwO",F="_dsTM2",z="_NQoX9",D="_g8QC-",M="_r3q69",W="_zEqGe",B="_ybN30",U="_4Pw75",Q="_Wd4pE";const q={placeholder:"\u8bf7\u9009\u62e9",selectAll:"\u5168\u9009",selected:"\u5df2\u9009",search:"\u641c\u7d22",numberOf:"{number}\u4e2a",maxLengthError:"\u6700\u5927\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc7{maxLength}",defaultChildren:"\u4e0b\u62c9\u5185\u5bb9\uff0c\u9700\u8981\u8c03\u7528\u65b9\u5b9e\u73b0"},J=["children"],X=e=>{let{children:t}=e,l=I(e,J);const{open:r,value:s}=l,[c,o]=(0,a.useState)(s);(0,a.useEffect)(()=>{r&&!m()(c,s)&&o(s)},[r]);const i=Object.assign({},l,{value:c,setValue:o,onComplete:()=>l.setValue(c),onAdd:e=>l.onAdd(e,o),onSelect:e=>l.onSelect(e,o),onRemove:e=>l.onRemove(e,o),children:t});return n().createElement(j,{value:i},t(i))},Z=(0,v.createWithIntlProvider)({defaultLocale:"zh-CN",namespace:"super-select",messages:{"zh-CN":q,"en-US":{placeholder:"Please select",selectAll:"Select All",selected:"Selected",search:"Search",numberOf:"{number} items",maxLengthError:"The maximum number cannot exceed {maxLength}",defaultChildren:"Dropdown content, to be implemented by the caller"}}})((0,a.forwardRef)((e,t)=>{const l=(0,v.useIntl)(),{formatMessage:r}=l,o=Object.assign({},{children:()=>r({id:"defaultChildren"}),maxLength:null,defaultOpen:!1,single:!1,disabled:!1,isPopup:!0,placeholder:r({id:"placeholder"}),searchPlaceholder:r({id:"search"}),completeTips:null,allowSelectedAll:!1,labelKey:"label",valueKey:"value",selectedAllValue:{value:"all",label:r({id:"selectAll"})},placement:"bottomLeft",labelWrap:!1,showSelectedTag:!1,allowClear:!0,prefix:null,suffix:null,extra:null,renderModal:e=>{const{props:t,open:l,onComplete:a,onOpenChange:r}=e,{placeholder:s,children:c}=t;return n().createElement(h.Modal,{width:1e3,open:l,title:s,onCancel:()=>{r(!1)},onOk:()=>{a(),r(!1)}},c(e))}},e);o.selectedAllValue={[o.valueKey]:o.selectedAllValue.value,[o.labelKey]:o.selectedAllValue.label};const{children:p,prefix:m,suffix:u,className:g,maxLength:y,overlayClassName:C,single:N,labelWrap:_,isPopup:S,allowClear:x,disabled:A,placeholder:k,selectedAllValue:O,overlayWidth:w,placement:P,renderModal:I,labelKey:T,valueKey:R}=o,q=e=>N?(0,b.isNotEmpty)(e)?[e]:[]:Array.isArray(e)?e:[],[J,Z]=(0,c.A)(Object.assign({},o,{onChange:e=>{o.onChange&&o.onChange(o.single?d()(e):e)}},"value"in o?{value:q(o.value)}:{defaultValue:q(o.defaultValue)})),[Y,G]=(0,a.useState)({}),[H,$]=(0,c.A)(o,{defaultValue:"defaultOpen",value:"open",onChange:"onOpenChange"}),[ee,te]=(0,a.useState)(!1),[le,ae]=(0,a.useState)(0),ne=(0,s.A)(e=>{ae(e.clientWidth)}),re=(se=Math.max(le,(e=>{if(!e)return 0;if(Number.isInteger(e))return e;const t=e.toString().match(/^\d*(\.\d*)?/);return t?Number(t[0]):0})(w)),"number"===typeof se?"".concat(se,"px"):se);var se;const{message:ce}=h.App.useApp(),oe=(e,t)=>!(Number.isInteger(t)&&t>0&&e.length>=t)||(ce.error(r({id:"maxLengthError"},{maxLength:t})),!1),ie=(e,t)=>{(t||Z)(t=>{const l=t.slice(0),a=t.findIndex(t=>t[R]===e[R]);return a>-1&&l.splice(a,1),l})},pe={props:o,value:J,setValue:Z,searchProps:Y,setSearchProps:G,hover:ee,inputWidth:le,onAdd:(e,t)=>{(t||Z)(t=>{if(oe(t,y))return t;const l=t.slice(0);return-1===t.findIndex(t=>t[R]===e[R])&&l.push(e),l})},onRemove:ie,onSelect:(e,t)=>{(t||Z)(t=>{const l=(t||[]).slice(0),a=l.findIndex(t=>t[R]===e[R]);return-1!==a||oe(l,y)?(-1===a?l.push(e):l.splice(a,1),l):t})},open:!A&&H,onOpenChange:$,children:p},me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"===typeof pe.props.inputRender?pe.props.inputRender(e,pe):n().createElement(h.Flex,K({},e,{ref:ne,className:i()(g,L,"select-input",{[F]:_,[V]:A}),justify:"space-between",onMouseOver:()=>{te(!0)},onMouseOut:()=>{te(!1)}}),(()=>{const e="function"===typeof m?m(pe):m;return e&&n().createElement("span",{className:i()(U,"select-input-prefix"),onClick:e=>{e.stopPropagation()}},e)})(),n().createElement("div",{className:i()(z,"select-input-inner")},J.length>0?N||J[0][R]===O[R]?J[0][T]:J.map(e=>n().createElement(h.Tag,{key:e[R],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),ie(e)}},e[T])):n().createElement("span",{className:i()(M,"select-input-placeholder")},k)),n().createElement("div",{className:i()(D,"select-input-icon")},!A&&x&&ee&&J.length>0?n().createElement(f.A,{onClick:e=>{e.stopPropagation(),Z([])}}):n().createElement(E.A,null)),(()=>{const e="function"===typeof u?u(pe):u;return e&&n().createElement("span",{className:i()(Q,"select-input-suffix"),onClick:e=>{e.stopPropagation()}},e)})())};return(0,a.useImperativeHandle)(t,()=>pe),n().createElement(j,{value:pe},S?n().createElement(h.Dropdown,{open:!A&&H,onOpenChange:$,placement:P,arrow:!1,overlayClassName:i()(B,C),trigger:"click",popupRender:()=>n().createElement("div",{style:{"--overlay-width":re},className:i()(W,"over-content"),onClick:e=>{e.stopPropagation()}},p(pe))},n().createElement("span",null,me())):n().createElement(n().Fragment,null,me({onClick:()=>{$(!0)}}),n().createElement(X,pe,I)))}));var Y="_prlgN";const G=(0,v.createWithIntlProvider)("zh-CN",q,"super-select")(()=>{const{formatMessage:e}=(0,v.useIntl)(),{props:t,value:l,setValue:a}=R(),{unit:r,selectedAllValue:s,valueKey:c}=Object.assign({},{unit:t=>e({id:"numberOf"},{number:t})},t),o=H(l,s,c);return n().createElement(h.Flex,{justify:"space-between",className:i()(Y,"selected-all")},n().createElement(h.Flex,{gap:8},n().createElement("span",null,e({id:"selected"}),":"),n().createElement("span",null,o?s.label:"function"===typeof r?r(l.length):l.length)),n().createElement("span",null,n().createElement(h.Checkbox,{checked:o,onChange:e=>{const t=e.target.checked;a(t?[s]:[])}},e({id:"selectAll"}))))}),H=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value";return 1===(null==e?void 0:e.length)&&C()(e,"[0][".concat(l,"]"))===t[l]};var $="_l3KoW",ee="_CCPzb",te="_dKZHi",le="_oijCI",ae="_WmnnS",ne="_TMcFl";const re=(0,v.createWithIntlProvider)("zh-CN",q,"super-select")(()=>{const{formatMessage:e}=(0,v.useIntl)(),{props:t,value:l,onRemove:a}=R(),{single:r,maxLength:s,labelKey:c,valueKey:o}=Object.assign({},t);return n().createElement(h.Flex,{className:i()(ee,"selected-tag-list"),gap:8},n().createElement("div",{className:$},e({id:"selected"}),!r&&l.length>0&&"(".concat(l.length).concat(Number.isInteger(s)?"/".concat(s):"",")"),":"),n().createElement(N.A,{className:te},n().createElement(h.Flex,{gap:8,wrap:!0,className:le},l.map(e=>n().createElement(h.Tag,{className:ae,key:e[o],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),a(e)}},n().createElement("span",{className:ne},e[c]))))))});var se="_IsXdU",ce="_SQZ8k",oe="_QD1Mz",ie="_M-mOy",pe="_KtOsz",me="_TQhBB",ue="_2rUrh",de="_NbwX5",he="_vN2Fx",ge="_6oITk",fe="_iAH9D",Ee="_TCkeJ",be="_v3f23";const ve=["children"],ye=(0,a.forwardRef)((e,t)=>{let{children:l}=e,r=I(e,ve);const s=(0,a.useRef)(null),c=Object.assign({},{renderItemContent:e=>{let{item:t,props:l}=e;const{labelKey:a}=l;return n().createElement(n().Fragment,null,n().createElement("div",{className:"select-list-item-label"},t[a]),t.description&&n().createElement("div",{className:i()(Ee,"select-list-item-description")},t.description))},renderItem:e=>{const{item:t,props:l,isSelectedAll:a,value:r,onSelect:s,setValue:c,onOpenChange:o}=e,{single:p,isPopup:m,renderItemContent:u,valueKey:d}=l,f=r.some(e=>e[d]===t[d]);return n().createElement(h.List.Item,{className:i()(pe,"select-list-item",{[me]:f,[de]:t.disabled}),key:t[d],onClick:()=>{t.disabled||a||(p?c([t]):s(t),m&&p&&o(!1))}},!p&&n().createElement(h.Flex,null,n().createElement(h.Checkbox,{checked:a||f,disabled:a||t.disabled})),n().createElement(h.Flex,{vertical:!0,gag:8,flex:1,className:"select-list-item-content"},u(e)),p&&n().createElement("div",{className:ue},f&&n().createElement(g.A,null)))},renderList:e=>{const{props:t,isSelectedAll:l,list:a}=e,{renderItem:r}=t;return a&&a.length>0?n().createElement(h.List,{className:i()(oe,{[ie]:l}),size:"small",dataSource:a,renderItem:t=>r(Object.assign({},e,{item:t}))}):t.empty||n().createElement(h.Empty,{className:ce})}},r);return n().createElement(Z,K({},c,{ref:t}),e=>{const{props:t,value:a,searchProps:r,setSearchProps:c,onOpenChange:o}=e,{footer:p,isPopup:m,getSearchProps:u,getSearchCallback:d,searchPlaceholder:g,valueKey:f,single:E,allowSelectedAll:b,showSelectedTag:v,api:y,options:C,renderList:N,selectedAllValue:x}=t,A={search:(y&&"function"===typeof u||C&&"function"===typeof d)&&n().createElement(_.A,{className:i()(fe,"select-list-search",{"is-popup":m}),placeholder:g,value:r.searchText,onSearch:e=>{c(t=>Object.assign({},t,{searchText:e}))},simple:m,showSearchButton:!m}),selectedAll:n().createElement("div",{className:i()(he,"select-list-selected-all",{"is-popup":m})},!E&&b&&n().createElement(G,null)),fetchList:n().createElement(S.h,K({},t,{className:i()(se,"select-list-scroll-list",{"is-popup":m}),searchProps:r,getSearchProps:u,api:Object.assign({},C?{data:{options:C,searchProps:r},loader:e=>{let{data:t}=e;const{options:l,searchProps:a}=t;if("function"===typeof d){return{pageData:l.filter(e=>d(a,e))}}return{pageData:l}}}:y),ref:s}),t=>{const l=H(a,x,f);return N(Object.assign({},t,e,{isSelectedAll:l}))}),selectedTag:v&&n().createElement("div",{className:i()(ge,"select-list-selected-tag",{"is-popup":m})},n().createElement(re,null)),footer:p&&n().createElement("div",{className:i()(be,"select-list-footer")},"function"===typeof p?p({reload:()=>{s.current&&s.current.reload()},close:()=>{o(!1)}}):p)};return"function"===typeof l?l(Object.assign({},e,{components:A})):n().createElement(h.Flex,{vertical:!0},A.search,A.selectedAll,A.fetchList,A.footer,A.selectedTag)})});var Ce="_DrEYJ",Ne="_5Tyrt",_e="_zDvSu",Se="_704J1",xe="_Vmbrg",Ae="_dJmfs",ke="_qU5zU",Oe="_MzyWg",we="_5luTv",Pe="_UXi-g",Ke="_iaCir",Ie="_JkYqS",Te="_VZlBL",je="_Eiz-u",Re="_temy6",Le="_7phL2",Ve="_ttNK9",Fe="_xU-i7",ze="_SvfzQ",De="_lISfA";const Me=(0,v.createWithIntlProvider)("zh-CN",q,"super-select")((0,a.forwardRef)((e,t)=>{const{formatMessage:l}=(0,v.useIntl)(),[r,s]=(0,a.useState)(""),c=(0,a.useRef)(),o=Object.assign({},{overlayWidth:"600px",filterRender:e=>{const{props:t,searchProps:l,setSearchProps:a}=e,{isPopup:r,searchPlaceholder:s,api:c,getSearchProps:o,options:p,getSearchCallback:m,labelKey:u}=t;return c&&"function"===typeof o||p&&"function"===typeof m?n().createElement(_.A,{className:i()(Re,"select-list-search",{"is-popup":r}),placeholder:s,value:l.searchText||"",onSearch:e=>{a(t=>Object.assign({},t,{searchText:e}))},simple:r,showSearchButton:!r}):null},getTagSearchCallback:(e,t,l)=>{const{props:a}=l,{labelKey:n}=a;return!e||t[n].indexOf(e)>-1}},e),p=(0,a.useRef)(null);return n().createElement(Z,K({},o,{ref:t}),e=>{const{props:t,value:o,setValue:m,onSelect:u,onRemove:d,onOpenChange:f}=e,{footer:E,filterRender:b,columns:v,options:y,getSearchCallback:x,getTagSearchCallback:A,api:k,selectedAllValue:O,isPopup:w,single:P,maxLength:I,getSearchProps:T,searchPlaceholder:j,allowSelectedAll:R,labelKey:L,valueKey:V,searchProps:F}=t,z=H(o,O,V),D=E&&n().createElement("div",{className:i()(De,"select-table-footer")},"function"===typeof E?E({reload:()=>{c.current&&c.current.reload()},close:()=>{f(!1)}}):E);return n().createElement(h.Row,{wrap:!1,ref:p},n().createElement(h.Col,{className:i()({[_e]:P}),span:P?24:16},n().createElement("div",null,b(Object.assign({},e))),n().createElement(h.Row,{wrap:!1,className:i()(xe,"select-table-list-header")},!P&&n().createElement(h.Col,{className:i()(Ae,"select-table-list-col")},R?n().createElement(h.Checkbox,{checked:z,onChange:e=>{const t=e.target.checked;m(t?[O]:[])}}):n().createElement(h.Checkbox,{style:{visibility:"hidden"}})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},v.map(e=>{const{name:t,title:l,span:a}=e;return n().createElement(h.Col,{key:t,span:a,className:i()(Ae,"select-table-list-col")},l)})))),n().createElement(S.h,K({},t,{className:i()(Ce,"select-table-list-scroll-list",{"is-popup":w}),searchProps:F,getSearchProps:T,api:Object.assign({},y?{data:{options:y,searchProps:F},loader:t=>{let{data:l}=t;const{options:a,searchProps:n}=l;if("function"===typeof x){return{pageData:a.filter(t=>x(n,t,e))}}return{pageData:a}}}:k),ref:c}),l=>{const{list:a}=l,r=Object.assign({},l,e,{isSelectedAll:z});return a&&a.length>0?a.map(e=>{const t=o.some(t=>t[V]===e[V]);return n().createElement(h.Row,{wrap:!1,key:e[V],className:i()(Se,"select-table-list-body",[{[ke]:z,[Oe]:t,[we]:e.disabled}]),onClick:()=>{e.disabled||z||(P?m([e]):u(e),w&&P&&f(!1))}},!P&&n().createElement(h.Col,{className:i()(Ae,"select-table-list-col")},n().createElement(h.Checkbox,{disabled:e.disabled||z,checked:z||t})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},v.map(t=>{const{name:l,span:a,getValueOf:s}=t;return n().createElement(h.Col,{key:l,span:a,className:i()(Ae,"select-table-list-col")},"function"===typeof s?s(e,r):C()(e,l))}))),P&&n().createElement(h.Col,{className:i()(Ae,je,"select-table-list-col")},t&&n().createElement(g.A,null)))}):t.empty||n().createElement(h.Empty,{className:i()(Ne,Se,"select-table-list-body")})}),P&&D||n().createElement("div",{className:i()(De,"select-table-footer")})),!P&&n().createElement(h.Col,{className:i()(Pe,{"is-popup":w}),span:8},n().createElement(_.A,{className:Le,placeholder:j,value:r,onSearch:e=>{s(e)},showSearchButton:!1}),n().createElement(h.Row,{wrap:!1,justify:"space-between",align:"middle"},n().createElement(h.Col,null,l({id:"selected"}),o.length>0&&"(".concat(o.length).concat(Number.isInteger(I)?"/".concat(I):"",")"),":"),n().createElement(h.Col,null,n().createElement(h.Button,{className:Ke,type:"link",onClick:()=>{m([])}},"\u79fb\u9664\u5168\u90e8"))),n().createElement(N.A,null,n().createElement(h.Flex,{wrap:!0,gap:8},o.filter(t=>A(r,t,e)).map(t=>n().createElement(h.Tag,{className:Ie,key:t[V],closable:!0,bordered:!1,onClose:e=>{e.preventDefault(),d(t)}},n().createElement(h.Popover,{getPopupContainer:()=>p.current,content:n().createElement(h.Row,{className:Ve},v.map(l=>{let{name:r,title:s,getValueOf:c}=l;return n().createElement(a.Fragment,{key:r},n().createElement(h.Col,{span:8,className:Fe},s),n().createElement(h.Col,{className:ze,span:16},"function"===typeof c?c(t,e):C()(t,r)))}))},n().createElement("span",{className:Te},t[L])))))),D))})}));var We="_YTqxA",Be="_IZN7r",Ue="_GCIMn",Qe="_AYi0i",qe="_eovZv",Je="_Tr-bO",Xe="_T-hri",Ze="_4XFtm",Ye="_Whlzr",Ge="_PjlnR";const He=["children"],$e=["data"],et=A()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{parentKey:t,valueKey:l,childrenKey:a}=arguments.length>1?arguments[1]:void 0;const n=r=>r.map(r=>{const s=e.filter(e=>!O()(r[l])&&e[t]===r[l]);return Object.assign({},r,{[a]:n(s)})});return{treeData:n(e.filter(e=>!e[t])),ids:e.map(e=>e.id)}}),tt=(0,a.forwardRef)((e,t)=>{let{children:l}=e,r=I(e,He);const s=(0,a.useRef)(null),[c,o]=(0,a.useState)([]),p=Object.assign({},{parentKey:"parentId",childrenKey:"children",renderItemContent:e=>{let{item:t,props:l}=e;const{labelKey:a}=l;return n().createElement(n().Fragment,null,n().createElement("div",{className:"select-tree-item-label"},t[a]))},renderItem:e=>{const{item:t,props:l,isSelectedAll:a,value:r,onSelect:s,setValue:c,onOpenChange:o}=e,{single:p,isPopup:m,renderItemContent:u,valueKey:d}=l,f=r.some(e=>e[d]===t[d]);return n().createElement(h.Flex,{className:i()(Qe,"select-tree-item",{[qe]:f,[Xe]:t.disabled}),key:t[d],onClick:()=>{t.disabled||a||(p?c([t]):s(t),m&&p&&o(!1))}},!p&&n().createElement(h.Flex,null,n().createElement(h.Checkbox,{checked:a||f,disabled:a||t.disabled})),n().createElement(h.Flex,{vertical:!0,gag:8,flex:1,className:"select-tree-item-content"},u(e)),p&&n().createElement("div",{className:Je},f&&n().createElement(g.A,null)))},renderTree:e=>{const{props:t,isSelectedAll:l,data:a}=e,{renderItem:r,valueKey:s,labelKey:p,childrenKey:m,parentKey:u}=t,{treeData:d,ids:g}=et(a,{valueKey:s,parentKey:u,childrenKey:m});return d&&d.length>0?n().createElement(h.Tree,{className:i()(Be,{[Ue]:l}),showIcon:!0,selectable:!1,expandedKeys:c,fieldNames:{title:p,key:s,children:m},treeData:d,onExpand:e=>{o(e)},titleRender:t=>r(Object.assign({},e,{item:t}))}):t.empty||n().createElement(h.Empty,null)}},r);return n().createElement(Z,K({},p,{ref:t}),e=>{const{props:t,value:a,onOpenChange:r}=e,{footer:c,isPopup:o,valueKey:p,single:m,allowSelectedAll:u,showSelectedTag:d,api:g,options:f,renderTree:E,selectedAllValue:b}=t,v={selectedAll:n().createElement("div",{className:i()(Ze,"select-tree-selected-all",{"is-popup":o})},!m&&u&&n().createElement(G,null)),treeList:n().createElement(P(),K({},Object.assign({},f?{data:{options:f},loader:e=>{let{data:t}=e;return t.options}}:g),{ref:s,render:t=>{let{data:l}=t,r=I(t,$e);const s=H(a,b,p);return n().createElement(N.A,{className:i()(We,"select-tree-scroll-list",{"is-popup":o})},E(Object.assign({},r,e,{isSelectedAll:s,data:l})))}})),selectedTag:d&&n().createElement("div",{className:i()(Ye,"select-tree-selected-tag",{"is-popup":o})},n().createElement(re,null)),footer:c&&n().createElement("div",{className:i()(Ge,"select-list-footer")},"function"===typeof c?c({reload:()=>{s.current&&s.current.reload()},close:()=>{r(!1)}}):c)};return"function"===typeof l?l(Object.assign({},e,{components:v})):n().createElement(h.Flex,{vertical:!0},v.search,v.selectedAll,v.treeList,v.footer,v.selectedTag)})})}}]);
//# sourceMappingURL=830.a17a90bf.chunk.js.map