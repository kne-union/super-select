"use strict";(self.webpackChunk_kne_components_super_select=self.webpackChunk_kne_components_super_select||[]).push([[223],{71830:(e,l,t)=>{t.r(l),t.d(l,{SelectInput:()=>W,SelectTableList:()=>we,SelectedAll:()=>$,SelectedTagList:()=>G,default:()=>ie});var a=t(94922),n=t.n(a),s=t(74946),c=t(50805),r=t(7717),o=t(54159),i=t.n(o),p=t(92679),u=t.n(p),m=t(15060),d=t.n(m),h=t(55199),g=t(7693),f=t(86340),E=t(7671),b=t(67823),v=t(33227),C=t.n(v),y=t(20046),N=(t(1251),t(72314)),_=t(83428);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var t=arguments[l];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},S.apply(null,arguments)}function x(e,l){if(null==e)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(l.includes(a))continue;t[a]=e[a]}return t}const k=(0,s.createContext)(),{Provider:w,useContext:A}=k;var P="_d8lGc",O="_3kjwO",j="_dsTM2",V="_NQoX9",K="_g8QC-",T="_r3q69",R="_zEqGe",I="_ybN30",L="_4Pw75",F="_Wd4pE";const D=["children"],M=e=>{let{children:l}=e,t=x(e,D);const{open:s,value:c}=t,[r,o]=(0,a.useState)(c);(0,a.useEffect)((()=>{s&&!u()(r,c)&&o(c)}),[s]);const i=Object.assign({},t,{value:r,setValue:o,onComplete:()=>t.setValue(r),onAdd:e=>t.onAdd(e,o),onSelect:e=>t.onSelect(e,o),onRemove:e=>t.onRemove(e,o),children:l});return n().createElement(w,{value:i},l(i))},W=(0,a.forwardRef)(((e,l)=>{const t=Object.assign({},{placeholder:"\u8bf7\u9009\u62e9",selectAll:"\u5168\u9009",selected:"\u5df2\u9009",search:"\u641c\u7d22",numberOf:"%s\u4e2a",maxLengthError:"\u6700\u5927\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc7%s",defaultChildren:"\u4e0b\u62c9\u5185\u5bb9\uff0c\u9700\u8981\u8c03\u7528\u65b9\u5b9e\u73b0"},e.locale),s=Object.assign({},{children:()=>t.defaultChildren,maxLength:null,single:!1,disabled:!1,isPopup:!0,defaultValue:[],placeholder:t.placeholder,searchPlaceholder:t.search,allowSelectedAll:!1,labelKey:"label",valueKey:"value",selectedAllValue:{value:"all",label:t.selectAll},placement:"bottomLeft",labelWrap:!0,showSelectedTag:!0,allowClear:!0,prefix:null,suffix:null,extra:null,renderModal:e=>{const{props:l,open:t,onComplete:a,onOpenChange:s}=e,{placeholder:c,children:r}=l;return n().createElement(h.Modal,{width:1e3,open:t,title:c,onCancel:()=>{s(!1)},onOk:()=>{a(),s(!1)}},r(e))}},e,{locale:t});s.selectedAllValue={[s.valueKey]:s.selectedAllValue.value,[s.labelKey]:s.selectedAllValue.label};const{children:o,prefix:p,suffix:u,className:m,maxLength:E,overlayClassName:v,single:C,labelWrap:y,isPopup:N,allowClear:_,disabled:x,placeholder:k,selectedAllValue:A,overlayWidth:D,placement:W,renderModal:z,labelKey:$,valueKey:B}=s,U=e=>C?(0,b.isNotEmpty)(e)?[e]:[]:Array.isArray(e)?e:[],[Q,q]=(0,r.A)(Object.assign({},s,{onChange:e=>{s.onChange&&s.onChange(s.single?d()(e):e)}},"value"in s?{value:U(s.value)}:{defaultValue:U(s.defaultValue)})),[J,X]=(0,a.useState)({}),[H,G]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)(!1),[ee,le]=(0,a.useState)(0),te=(0,c.A)((e=>{le(e.clientWidth)})),ae=(ne=Math.max(ee,(e=>{if(!e)return 0;if(Number.isInteger(e))return e;const l=e.toString().match(/^\d*(\.\d*)?/);return l?Number(l[0]):0})(D)),"number"===typeof ne?`${ne}px`:ne);var ne;const{message:se}=h.App.useApp(),ce=(e,l)=>!(Number.isInteger(l)&&l>0&&e.length>=l)||(se.error(t.maxLengthError.replace("%s",l)),!1),re=(e,l)=>{(l||q)((l=>{const t=l.slice(0),a=l.findIndex((l=>l[B]===e[B]));return a>-1&&t.splice(a,1),t}))},oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n().createElement(h.Flex,S({},e,{ref:te,className:i()(m,P,"select-input",{[j]:y,[O]:x}),justify:"space-between",onMouseOver:()=>{Z(!0)},onMouseOut:()=>{Z(!1)}}),(()=>{const e="function"===typeof p?p(ie):p;return e&&n().createElement("span",{className:i()(L,"select-input-prefix"),onClick:e=>{e.stopPropagation()}},e)})(),n().createElement("div",{className:i()(V,"select-input-inner")},Q.length>0?C||Q[0][B]===A[B]?Q[0][$]:Q.map((e=>n().createElement(h.Tag,{key:e[B],closable:!0,bordered:!1,onClose:l=>{l.preventDefault(),re(e)}},e[$]))):n().createElement("span",{className:i()(T,"select-input-placeholder")},k)),n().createElement("div",{className:i()(K,"select-input-icon")},!x&&_&&Y&&Q.length>0?n().createElement(g.A,{onClick:e=>{e.stopPropagation(),q([])}}):n().createElement(f.A,null)),(()=>{const e="function"===typeof u?u(ie):u;return e&&n().createElement("span",{className:i()(F,"select-input-suffix"),onClick:e=>{e.stopPropagation()}},e)})())},ie={props:s,value:Q,setValue:q,searchProps:J,setSearchProps:X,hover:Y,inputWidth:ee,onAdd:(e,l)=>{(l||q)((l=>{if(ce(l,E))return l;const t=l.slice(0);return-1===l.findIndex((l=>l[B]===e[B]))&&t.push(e),t}))},onRemove:re,onSelect:(e,l)=>{(l||q)((l=>{const t=(l||[]).slice(0),a=t.findIndex((l=>l[B]===e[B]));return-1!==a||ce(t,E)?(-1===a?t.push(e):t.splice(a,1),t):l}))},open:!x&&H,onOpenChange:G,children:o};return(0,a.useImperativeHandle)(l,(()=>ie)),n().createElement(w,{value:ie},N?n().createElement(h.Dropdown,{open:!x&&H,onOpenChange:G,placement:W,arrow:!1,overlayClassName:i()(I,v),trigger:"click",dropdownRender:()=>n().createElement("div",{style:{"--overlay-width":ae},className:i()(R,"over-content"),onClick:e=>{e.stopPropagation()}},o(ie))},n().createElement("span",null,oe())):n().createElement(n().Fragment,null,oe({onClick:()=>{G(!0)}}),n().createElement(M,ie,z)))}));var z="_prlgN";const $=()=>{const{props:e,value:l,setValue:t}=A(),{unit:a,selectedAllValue:s,locale:c,valueKey:r}=Object.assign({},{unit:e=>c.numberOf.replace("%s",e)},e),o=B(l,s,r);return n().createElement(h.Flex,{justify:"space-between",className:i()(z,"selected-all")},n().createElement(h.Flex,{gap:8},n().createElement("span",null,c.selected,":"),n().createElement("span",null,o?s.label:"function"===typeof a?a(l.length):l.length)),n().createElement("span",null,n().createElement(h.Checkbox,{checked:o,onChange:e=>{const l=e.target.checked;t(l?[s]:[])}},c.selectAll)))},B=function(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value";return 1===(null==e?void 0:e.length)&&C()(e,`[0][${t}]`)===l[t]};var U="_l3KoW",Q="_CCPzb",q="_dKZHi",J="_oijCI",X="_WmnnS",H="_TMcFl";const G=()=>{const{props:e,value:l,onRemove:t}=A(),{locale:a,single:s,maxLength:c,labelKey:r,valueKey:o}=Object.assign({},e);return n().createElement(h.Flex,{className:i()(Q,"selected-tag-list"),gap:8},n().createElement("div",{className:U},a.selected,!s&&l.length>0&&`(${l.length}${Number.isInteger(c)?`/${c}`:""})`,":"),n().createElement(y.A,{className:q},n().createElement(h.Flex,{gap:8,wrap:!0,className:J},l.map((e=>n().createElement(h.Tag,{className:X,key:e[o],closable:!0,bordered:!1,onClose:l=>{l.preventDefault(),t(e)}},n().createElement("span",{className:H},e[r])))))))};var Y="_IsXdU",Z="_QD1Mz",ee="_M-mOy",le="_KtOsz",te="_TQhBB",ae="_2rUrh",ne="_NbwX5",se="_vN2Fx",ce="_6oITk",re="_iAH9D";const oe=["children"],ie=(0,a.forwardRef)(((e,l)=>{let{children:t}=e,a=x(e,oe);const s=Object.assign({},{renderItemContent:e=>{let{item:l,props:t}=e;const{labelKey:a}=t;return n().createElement(n().Fragment,null,n().createElement("div",{className:"select-list-item-label"},l[a]),l.description&&n().createElement("div",{className:"select-list-item-description"},l.description))},renderItem:e=>{const{item:l,props:t,isSelectedAll:a,value:s,onSelect:c,setValue:r,onOpenChange:o}=e,{single:p,isPopup:u,renderItemContent:m,valueKey:d}=t,g=s.some((e=>e[d]===l[d]));return n().createElement(h.List.Item,{className:i()(le,"select-list-item",{[te]:g,[ne]:l.disabled}),key:l[d],onClick:()=>{l.disabled||a||(p?r([l]):c(l),u&&p&&o(!1))}},!p&&n().createElement(h.Flex,null,n().createElement(h.Checkbox,{checked:a||g,disabled:a||l.disabled})),n().createElement(h.Flex,{vertical:!0,gag:8,flex:1,className:"select-list-item-content"},m(e)),p&&n().createElement("div",{className:ae},g&&n().createElement(E.A,null)))},renderList:e=>{const{props:l,isSelectedAll:t,list:a}=e,{renderItem:s}=l;return n().createElement(h.List,{className:i()(Z,{[ee]:t}),size:"small",dataSource:a,renderItem:l=>s(Object.assign({},e,{item:l}))})}},a);return n().createElement(W,S({},s,{ref:l}),(e=>{const{props:l,value:a,searchProps:s,setSearchProps:c}=e,{isPopup:r,getSearchProps:o,getSearchCallback:p,searchPlaceholder:u,valueKey:m,single:d,allowSelectedAll:g,showSelectedTag:f,api:E,options:b,renderList:v,selectedAllValue:C}=l,y={search:(E&&"function"===typeof o||b&&"function"===typeof p)&&n().createElement(N.A,{className:i()(re,"select-list-search",{"is-popup":r}),placeholder:u,value:s.searchText,onSearch:e=>{c((l=>Object.assign({},l,{searchText:e})))},simple:r,showSearchButton:!r}),selectedAll:n().createElement("div",{className:i()(se,"select-list-selected-all",{"is-popup":r})},!d&&g&&n().createElement($,null)),fetchList:n().createElement(_.h,S({},l,{className:i()(Y,"select-list-scroll-list",{"is-popup":r}),searchProps:s,getSearchProps:o,api:Object.assign({},b?{data:{options:b,searchProps:s},loader:e=>{let{data:l}=e;const{options:t,searchProps:a}=l;if("function"===typeof p){return{pageData:t.filter((e=>p(a,e)))}}return{pageData:t}}}:E)}),(l=>{const t=B(a,C,m);return v(Object.assign({},l,e,{isSelectedAll:t}))})),selectedTag:f&&n().createElement("div",{className:i()(ce,"select-list-selected-tag",{"is-popup":r})},n().createElement(G,null))};return"function"===typeof t?t(Object.assign({},e,{components:y})):n().createElement(h.Flex,{vertical:!0},y.search,y.selectedAll,y.fetchList,y.selectedTag)}))}));var pe="_DrEYJ",ue="_Vmbrg",me="_dJmfs",de="_704J1",he="_qU5zU",ge="_MzyWg",fe="_5luTv",Ee="_UXi-g",be="_iaCir",ve="_JkYqS",Ce="_VZlBL",ye="_Eiz-u",Ne="_temy6",_e="_7phL2",Se="_ttNK9",xe="_xU-i7",ke="_SvfzQ";const we=(0,a.forwardRef)(((e,l)=>{const[t,s]=(0,a.useState)(""),c=Object.assign({},{overlayWidth:"600px",filterRender:e=>{const{props:l,searchProps:t,setSearchProps:a}=e,{isPopup:s,searchPlaceholder:c,api:r,getSearchProps:o,options:p,getSearchCallback:u,labelKey:m}=l;return r&&"function"===typeof o||p&&"function"===typeof u?n().createElement(N.A,{className:i()(Ne,"select-list-search",{"is-popup":s}),placeholder:c,value:t.searchText||"",onSearch:e=>{a((l=>Object.assign({},l,{searchText:e})))},simple:s,showSearchButton:!s}):null},getTagSearchCallback:(e,l,t)=>{const{props:a}=t,{labelKey:n}=a;return!e||l[n].indexOf(e)>-1}},e),r=(0,a.useRef)(null);return n().createElement(W,S({},c,{ref:l}),(e=>{const{props:l,value:c,setValue:o,onSelect:p,onRemove:u,onOpenChange:m}=e,{filterRender:d,columns:g,options:f,getSearchCallback:b,getTagSearchCallback:v,api:x,selectedAllValue:k,isPopup:w,locale:A,single:P,maxLength:O,getSearchProps:j,searchPlaceholder:V,allowSelectedAll:K,labelKey:T,valueKey:R,searchProps:I}=l,L=B(c,k,R);return n().createElement(h.Row,{wrap:!1,ref:r},n().createElement(h.Col,{span:P?24:16},n().createElement("div",null,d(Object.assign({},e))),n().createElement(h.Row,{wrap:!1,className:i()(ue,"select-table-list-header")},!P&&n().createElement(h.Col,{className:i()(me,"select-table-list-col")},K?n().createElement(h.Checkbox,{checked:L,onChange:e=>{const l=e.target.checked;o(l?[k]:[])}}):n().createElement(h.Checkbox,{style:{visibility:"hidden"}})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},g.map((e=>{const{name:l,title:t,span:a}=e;return n().createElement(h.Col,{key:l,span:a,className:i()(me,"select-table-list-col")},t)}))))),n().createElement(_.h,S({},l,{className:i()(pe,"select-table-list-scroll-list",{"is-popup":w}),searchProps:I,getSearchProps:j,api:Object.assign({},f?{data:{options:f,searchProps:I},loader:l=>{let{data:t}=l;const{options:a,searchProps:n}=t;if("function"===typeof b){return{pageData:a.filter((l=>b(n,l,e)))}}return{pageData:a}}}:x)}),(l=>{const{list:t}=l,a=Object.assign({},l,e,{isSelectedAll:L});return t.map((e=>{const l=c.some((l=>l[R]===e[R]));return n().createElement(h.Row,{wrap:!1,key:e[R],className:i()(de,"select-table-list-body",[{[he]:L,[ge]:l,[fe]:e.disabled}]),onClick:()=>{e.disabled||L||(P?o([e]):p(e),w&&P&&m(!1))}},!P&&n().createElement(h.Col,{className:i()(me,"select-table-list-col")},n().createElement(h.Checkbox,{disabled:e.disabled||L,checked:L||l})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},g.map((l=>{const{name:t,span:s,getValueOf:c}=l;return n().createElement(h.Col,{key:t,span:s,className:i()(me,"select-table-list-col")},"function"===typeof c?c(e,a):C()(e,t))})))),P&&n().createElement(h.Col,{className:i()(me,ye,"select-table-list-col")},l&&n().createElement(E.A,null)))}))}))),!P&&n().createElement(h.Col,{className:i()(Ee),span:8},n().createElement(N.A,{className:_e,placeholder:V,value:t,onSearch:e=>{s(e)},showSearchButton:!1}),n().createElement(h.Row,{wrap:!1,justify:"space-between",align:"middle"},n().createElement(h.Col,null,A.selected,c.length>0&&`(${c.length}${Number.isInteger(O)?`/${O}`:""})`,":"),n().createElement(h.Col,null,n().createElement(h.Button,{className:be,type:"link",onClick:()=>{o([])}},"\u79fb\u9664\u5168\u90e8"))),n().createElement(y.A,null,n().createElement(h.Flex,{wrap:!0,gap:8},c.filter((l=>v(t,l,e))).map((l=>n().createElement(h.Tag,{className:ve,key:l[R],closable:!0,bordered:!1,onClose:e=>{e.preventDefault(),u(l)}},n().createElement(h.Popover,{getPopupContainer:()=>r.current,content:n().createElement(h.Row,{className:Se},g.map((t=>{let{name:s,title:c,getValueOf:r}=t;return n().createElement(a.Fragment,{key:s},n().createElement(h.Col,{span:8,className:xe},c),n().createElement(h.Col,{className:ke,span:16},"function"===typeof r?r(l,e):C()(l,s)))})))},n().createElement("span",{className:Ce},l[T])))))))))}))}))}}]);
//# sourceMappingURL=223.14a200ba.chunk.js.map