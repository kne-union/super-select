"use strict";(self.webpackChunk_kne_components_super_select=self.webpackChunk_kne_components_super_select||[]).push([[223],{71830:(e,t,l)=>{l.r(t),l.d(t,{SelectInput:()=>$,SelectTableList:()=>je,SelectedAll:()=>U,SelectedTagList:()=>Z,default:()=>de});var a=l(94922),n=l.n(a),s=l(74946),r=l(50805),c=l(7717),o=l(54159),i=l.n(o),p=l(92679),u=l.n(p),m=l(15060),d=l.n(m),h=l(28833),f=l(7693),g=l(86340),b=l(7671),E=l(67823),v=l(20274),C=l(33227),y=l.n(C),N=l(20046),_=(l(1251),l(41792)),x=l(83428);l(41781);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},S.apply(null,arguments)}function k(e,t){if(null==e)return{};var l={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;l[a]=e[a]}return l}const A=(0,s.createContext)(),{Provider:P,useContext:w}=A;var O="_d8lGc",I="_3kjwO",j="_dsTM2",R="_NQoX9",T="_g8QC-",L="_r3q69",V="_zEqGe",K="_ybN30",M="_4Pw75",z="_Wd4pE";const F={placeholder:"\u8bf7\u9009\u62e9",selectAll:"\u5168\u9009",selected:"\u5df2\u9009",search:"\u641c\u7d22",numberOf:"{number}\u4e2a",maxLengthError:"\u6700\u5927\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc7{maxLength}",defaultChildren:"\u4e0b\u62c9\u5185\u5bb9\uff0c\u9700\u8981\u8c03\u7528\u65b9\u5b9e\u73b0"},W=["children"],D=e=>{let{children:t}=e,l=k(e,W);const{open:s,value:r}=l,[c,o]=(0,a.useState)(r);(0,a.useEffect)(()=>{s&&!u()(c,r)&&o(r)},[s]);const i=Object.assign({},l,{value:c,setValue:o,onComplete:()=>l.setValue(c),onAdd:e=>l.onAdd(e,o),onSelect:e=>l.onSelect(e,o),onRemove:e=>l.onRemove(e,o),children:t});return n().createElement(P,{value:i},t(i))},$=(0,v.createWithIntlProvider)({defaultLocale:"zh-CN",namespace:"super-select",messages:{"zh-CN":F,"en-US":{placeholder:"Please select",selectAll:"Select All",selected:"Selected",search:"Search",numberOf:"{number} items",maxLengthError:"The maximum number cannot exceed {maxLength}",defaultChildren:"Dropdown content, to be implemented by the caller"}}})((0,a.forwardRef)((e,t)=>{const l=(0,v.useIntl)(),{formatMessage:s}=l,o=Object.assign({},{children:()=>s({id:"defaultChildren"}),maxLength:null,defaultOpen:!1,single:!1,disabled:!1,isPopup:!0,placeholder:s({id:"placeholder"}),searchPlaceholder:s({id:"search"}),completeTips:null,allowSelectedAll:!1,labelKey:"label",valueKey:"value",selectedAllValue:{value:"all",label:s({id:"selectAll"})},placement:"bottomLeft",labelWrap:!1,showSelectedTag:!1,allowClear:!0,prefix:null,suffix:null,extra:null,renderModal:e=>{const{props:t,open:l,onComplete:a,onOpenChange:s}=e,{placeholder:r,children:c}=t;return n().createElement(h.Modal,{width:1e3,open:l,title:r,onCancel:()=>{s(!1)},onOk:()=>{a(),s(!1)}},c(e))}},e);o.selectedAllValue={[o.valueKey]:o.selectedAllValue.value,[o.labelKey]:o.selectedAllValue.label};const{children:p,prefix:u,suffix:m,className:b,maxLength:C,overlayClassName:y,single:N,labelWrap:_,isPopup:x,allowClear:k,disabled:A,placeholder:w,selectedAllValue:F,overlayWidth:W,placement:$,renderModal:B,labelKey:U,valueKey:J}=o,Q=e=>N?(0,E.isNotEmpty)(e)?[e]:[]:Array.isArray(e)?e:[],[q,X]=(0,c.A)(Object.assign({},o,{onChange:e=>{o.onChange&&o.onChange(o.single?d()(e):e)}},"value"in o?{value:Q(o.value)}:{defaultValue:Q(o.defaultValue)})),[H,G]=(0,a.useState)({}),[Y,Z]=(0,c.A)(o,{defaultValue:"defaultOpen",value:"open",onChange:"onOpenChange"}),[ee,te]=(0,a.useState)(!1),[le,ae]=(0,a.useState)(0),ne=(0,r.A)(e=>{ae(e.clientWidth)}),se=(re=Math.max(le,(e=>{if(!e)return 0;if(Number.isInteger(e))return e;const t=e.toString().match(/^\d*(\.\d*)?/);return t?Number(t[0]):0})(W)),"number"===typeof re?`${re}px`:re);var re;const{message:ce}=h.App.useApp(),oe=(e,t)=>!(Number.isInteger(t)&&t>0&&e.length>=t)||(ce.error(s({id:"maxLengthError"},{maxLength:t})),!1),ie=(e,t)=>{(t||X)(t=>{const l=t.slice(0),a=t.findIndex(t=>t[J]===e[J]);return a>-1&&l.splice(a,1),l})},pe={props:o,value:q,setValue:X,searchProps:H,setSearchProps:G,hover:ee,inputWidth:le,onAdd:(e,t)=>{(t||X)(t=>{if(oe(t,C))return t;const l=t.slice(0);return-1===t.findIndex(t=>t[J]===e[J])&&l.push(e),l})},onRemove:ie,onSelect:(e,t)=>{(t||X)(t=>{const l=(t||[]).slice(0),a=l.findIndex(t=>t[J]===e[J]);return-1!==a||oe(l,C)?(-1===a?l.push(e):l.splice(a,1),l):t})},open:!A&&Y,onOpenChange:Z,children:p},ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"===typeof pe.props.inputRender?pe.props.inputRender(e,pe):n().createElement(h.Flex,S({},e,{ref:ne,className:i()(b,O,"select-input",{[j]:_,[I]:A}),justify:"space-between",onMouseOver:()=>{te(!0)},onMouseOut:()=>{te(!1)}}),(()=>{const e="function"===typeof u?u(pe):u;return e&&n().createElement("span",{className:i()(M,"select-input-prefix"),onClick:e=>{e.stopPropagation()}},e)})(),n().createElement("div",{className:i()(R,"select-input-inner")},q.length>0?N||q[0][J]===F[J]?q[0][U]:q.map(e=>n().createElement(h.Tag,{key:e[J],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),ie(e)}},e[U])):n().createElement("span",{className:i()(L,"select-input-placeholder")},w)),n().createElement("div",{className:i()(T,"select-input-icon")},!A&&k&&ee&&q.length>0?n().createElement(f.A,{onClick:e=>{e.stopPropagation(),X([])}}):n().createElement(g.A,null)),(()=>{const e="function"===typeof m?m(pe):m;return e&&n().createElement("span",{className:i()(z,"select-input-suffix"),onClick:e=>{e.stopPropagation()}},e)})())};return(0,a.useImperativeHandle)(t,()=>pe),n().createElement(P,{value:pe},x?n().createElement(h.Dropdown,{open:!A&&Y,onOpenChange:Z,placement:$,arrow:!1,overlayClassName:i()(K,y),trigger:"click",popupRender:()=>n().createElement("div",{style:{"--overlay-width":se},className:i()(V,"over-content"),onClick:e=>{e.stopPropagation()}},p(pe))},n().createElement("span",null,ue())):n().createElement(n().Fragment,null,ue({onClick:()=>{Z(!0)}}),n().createElement(D,pe,B)))}));var B="_prlgN";const U=(0,v.createWithIntlProvider)("zh-CN",F,"super-select")(()=>{const{formatMessage:e}=(0,v.useIntl)(),{props:t,value:l,setValue:a}=w(),{unit:s,selectedAllValue:r,valueKey:c}=Object.assign({},{unit:t=>e({id:"numberOf"},{number:t})},t),o=J(l,r,c);return n().createElement(h.Flex,{justify:"space-between",className:i()(B,"selected-all")},n().createElement(h.Flex,{gap:8},n().createElement("span",null,e({id:"selected"}),":"),n().createElement("span",null,o?r.label:"function"===typeof s?s(l.length):l.length)),n().createElement("span",null,n().createElement(h.Checkbox,{checked:o,onChange:e=>{const t=e.target.checked;a(t?[r]:[])}},e({id:"selectAll"}))))}),J=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value";return 1===(null==e?void 0:e.length)&&y()(e,`[0][${l}]`)===t[l]};var Q="_l3KoW",q="_CCPzb",X="_dKZHi",H="_oijCI",G="_WmnnS",Y="_TMcFl";const Z=(0,v.createWithIntlProvider)("zh-CN",F,"super-select")(()=>{const{formatMessage:e}=(0,v.useIntl)(),{props:t,value:l,onRemove:a}=w(),{single:s,maxLength:r,labelKey:c,valueKey:o}=Object.assign({},t);return n().createElement(h.Flex,{className:i()(q,"selected-tag-list"),gap:8},n().createElement("div",{className:Q},e({id:"selected"}),!s&&l.length>0&&`(${l.length}${Number.isInteger(r)?`/${r}`:""})`,":"),n().createElement(N.A,{className:X},n().createElement(h.Flex,{gap:8,wrap:!0,className:H},l.map(e=>n().createElement(h.Tag,{className:G,key:e[o],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),a(e)}},n().createElement("span",{className:Y},e[c]))))))});var ee="_IsXdU",te="_QD1Mz",le="_M-mOy",ae="_KtOsz",ne="_TQhBB",se="_2rUrh",re="_NbwX5",ce="_vN2Fx",oe="_6oITk",ie="_iAH9D",pe="_TCkeJ",ue="_v3f23";const me=["children"],de=(0,a.forwardRef)((e,t)=>{let{children:l}=e,s=k(e,me);const r=(0,a.useRef)(null),c=Object.assign({},{renderItemContent:e=>{let{item:t,props:l}=e;const{labelKey:a}=l;return n().createElement(n().Fragment,null,n().createElement("div",{className:"select-list-item-label"},t[a]),t.description&&n().createElement("div",{className:i()(pe,"select-list-item-description")},t.description))},renderItem:e=>{const{item:t,props:l,isSelectedAll:a,value:s,onSelect:r,setValue:c,onOpenChange:o}=e,{single:p,isPopup:u,renderItemContent:m,valueKey:d}=l,f=s.some(e=>e[d]===t[d]);return n().createElement(h.List.Item,{className:i()(ae,"select-list-item",{[ne]:f,[re]:t.disabled}),key:t[d],onClick:()=>{t.disabled||a||(p?c([t]):r(t),u&&p&&o(!1))}},!p&&n().createElement(h.Flex,null,n().createElement(h.Checkbox,{checked:a||f,disabled:a||t.disabled})),n().createElement(h.Flex,{vertical:!0,gag:8,flex:1,className:"select-list-item-content"},m(e)),p&&n().createElement("div",{className:se},f&&n().createElement(b.A,null)))},renderList:e=>{const{props:t,isSelectedAll:l,list:a}=e,{renderItem:s}=t;return n().createElement(h.List,{className:i()(te,{[le]:l}),size:"small",dataSource:a,renderItem:t=>s(Object.assign({},e,{item:t}))})}},s);return n().createElement($,S({},c,{ref:t}),e=>{const{props:t,value:a,searchProps:s,setSearchProps:c,onOpenChange:o}=e,{footer:p,isPopup:u,getSearchProps:m,getSearchCallback:d,searchPlaceholder:f,valueKey:g,single:b,allowSelectedAll:E,showSelectedTag:v,api:C,options:y,renderList:N,selectedAllValue:k}=t,A={search:(C&&"function"===typeof m||y&&"function"===typeof d)&&n().createElement(_.A,{className:i()(ie,"select-list-search",{"is-popup":u}),placeholder:f,value:s.searchText,onSearch:e=>{c(t=>Object.assign({},t,{searchText:e}))},simple:u,showSearchButton:!u}),selectedAll:n().createElement("div",{className:i()(ce,"select-list-selected-all",{"is-popup":u})},!b&&E&&n().createElement(U,null)),fetchList:n().createElement(x.h,S({},t,{className:i()(ee,"select-list-scroll-list",{"is-popup":u}),searchProps:s,getSearchProps:m,api:Object.assign({},y?{data:{options:y,searchProps:s},loader:e=>{let{data:t}=e;const{options:l,searchProps:a}=t;if("function"===typeof d){return{pageData:l.filter(e=>d(a,e))}}return{pageData:l}}}:C),ref:r}),t=>{const l=J(a,k,g);return N(Object.assign({},t,e,{isSelectedAll:l}))}),selectedTag:v&&n().createElement("div",{className:i()(oe,"select-list-selected-tag",{"is-popup":u})},n().createElement(Z,null))};return"function"===typeof l?l(Object.assign({},e,{components:A})):n().createElement(h.Flex,{vertical:!0},A.search,A.selectedAll,A.fetchList,p&&n().createElement("div",{className:i()(ue,"select-list-footer")},"function"===typeof p?p({reload:()=>{r.current&&r.current.reload()},close:()=>{o(!1)}}):p),A.selectedTag)})});var he="_DrEYJ",fe="_Vmbrg",ge="_dJmfs",be="_704J1",Ee="_qU5zU",ve="_MzyWg",Ce="_5luTv",ye="_UXi-g",Ne="_iaCir",_e="_JkYqS",xe="_VZlBL",Se="_Eiz-u",ke="_temy6",Ae="_7phL2",Pe="_ttNK9",we="_xU-i7",Oe="_SvfzQ",Ie="_lISfA";const je=(0,v.createWithIntlProvider)("zh-CN",F,"super-select")((0,a.forwardRef)((e,t)=>{const{formatMessage:l}=(0,v.useIntl)(),[s,r]=(0,a.useState)(""),c=(0,a.useRef)(),o=Object.assign({},{overlayWidth:"600px",filterRender:e=>{const{props:t,searchProps:l,setSearchProps:a}=e,{isPopup:s,searchPlaceholder:r,api:c,getSearchProps:o,options:p,getSearchCallback:u,labelKey:m}=t;return c&&"function"===typeof o||p&&"function"===typeof u?n().createElement(_.A,{className:i()(ke,"select-list-search",{"is-popup":s}),placeholder:r,value:l.searchText||"",onSearch:e=>{a(t=>Object.assign({},t,{searchText:e}))},simple:s,showSearchButton:!s}):null},getTagSearchCallback:(e,t,l)=>{const{props:a}=l,{labelKey:n}=a;return!e||t[n].indexOf(e)>-1}},e),p=(0,a.useRef)(null);return n().createElement($,S({},o,{ref:t}),e=>{const{props:t,value:o,setValue:u,onSelect:m,onRemove:d,onOpenChange:f}=e,{footer:g,filterRender:E,columns:v,options:C,getSearchCallback:k,getTagSearchCallback:A,api:P,selectedAllValue:w,isPopup:O,single:I,maxLength:j,getSearchProps:R,searchPlaceholder:T,allowSelectedAll:L,labelKey:V,valueKey:K,searchProps:M}=t,z=J(o,w,K),F=g&&n().createElement("div",{className:i()(Ie,"select-table-footer")},"function"===typeof g?g({reload:()=>{c.current&&c.current.reload()},close:()=>{f(!1)}}):g);return n().createElement(h.Row,{wrap:!1,ref:p},n().createElement(h.Col,{span:I?24:16},n().createElement("div",null,E(Object.assign({},e))),n().createElement(h.Row,{wrap:!1,className:i()(fe,"select-table-list-header")},!I&&n().createElement(h.Col,{className:i()(ge,"select-table-list-col")},L?n().createElement(h.Checkbox,{checked:z,onChange:e=>{const t=e.target.checked;u(t?[w]:[])}}):n().createElement(h.Checkbox,{style:{visibility:"hidden"}})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},v.map(e=>{const{name:t,title:l,span:a}=e;return n().createElement(h.Col,{key:t,span:a,className:i()(ge,"select-table-list-col")},l)})))),n().createElement(x.h,S({},t,{className:i()(he,"select-table-list-scroll-list",{"is-popup":O}),searchProps:M,getSearchProps:R,api:Object.assign({},C?{data:{options:C,searchProps:M},loader:t=>{let{data:l}=t;const{options:a,searchProps:n}=l;if("function"===typeof k){return{pageData:a.filter(t=>k(n,t,e))}}return{pageData:a}}}:P),ref:c}),t=>{const{list:l}=t,a=Object.assign({},t,e,{isSelectedAll:z});return l.map(e=>{const t=o.some(t=>t[K]===e[K]);return n().createElement(h.Row,{wrap:!1,key:e[K],className:i()(be,"select-table-list-body",[{[Ee]:z,[ve]:t,[Ce]:e.disabled}]),onClick:()=>{e.disabled||z||(I?u([e]):m(e),O&&I&&f(!1))}},!I&&n().createElement(h.Col,{className:i()(ge,"select-table-list-col")},n().createElement(h.Checkbox,{disabled:e.disabled||z,checked:z||t})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},v.map(t=>{const{name:l,span:s,getValueOf:r}=t;return n().createElement(h.Col,{key:l,span:s,className:i()(ge,"select-table-list-col")},"function"===typeof r?r(e,a):y()(e,l))}))),I&&n().createElement(h.Col,{className:i()(ge,Se,"select-table-list-col")},t&&n().createElement(b.A,null)))})}),I&&F),!I&&n().createElement(h.Col,{className:i()(ye,{"is-popup":O}),span:8},n().createElement(_.A,{className:Ae,placeholder:T,value:s,onSearch:e=>{r(e)},showSearchButton:!1}),n().createElement(h.Row,{wrap:!1,justify:"space-between",align:"middle"},n().createElement(h.Col,null,l({id:"selected"}),o.length>0&&`(${o.length}${Number.isInteger(j)?`/${j}`:""})`,":"),n().createElement(h.Col,null,n().createElement(h.Button,{className:Ne,type:"link",onClick:()=>{u([])}},"\u79fb\u9664\u5168\u90e8"))),n().createElement(N.A,null,n().createElement(h.Flex,{wrap:!0,gap:8},o.filter(t=>A(s,t,e)).map(t=>n().createElement(h.Tag,{className:_e,key:t[K],closable:!0,bordered:!1,onClose:e=>{e.preventDefault(),d(t)}},n().createElement(h.Popover,{getPopupContainer:()=>p.current,content:n().createElement(h.Row,{className:Pe},v.map(l=>{let{name:s,title:r,getValueOf:c}=l;return n().createElement(a.Fragment,{key:s},n().createElement(h.Col,{span:8,className:we},r),n().createElement(h.Col,{className:Oe,span:16},"function"===typeof c?c(t,e):y()(t,s)))}))},n().createElement("span",{className:xe},t[V])))))),F))})}))}}]);
//# sourceMappingURL=223.7543b3fd.chunk.js.map