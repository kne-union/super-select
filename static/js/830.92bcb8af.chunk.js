"use strict";(self.webpackChunk_kne_components_super_select=self.webpackChunk_kne_components_super_select||[]).push([[830],{71830:(e,t,l)=>{l.r(t),l.d(t,{SelectInput:()=>Y,SelectTableList:()=>Fe,SelectTree:()=>He,SelectedAll:()=>G,SelectedTagList:()=>re,default:()=>ve});var a=l(94922),n=l.n(a),r=l(74946),s=l(50805),c=l(7717),o=l(54159),i=l.n(o),p=l(92679),u=l.n(p),d=l(15060),m=l.n(d),h=l(28833),g=l(7671),f=l(7693),b=l(86340),E=l(67823),v=l(20274),y=l(33227),C=l.n(y),N=l(20046),_=(l(1251),l(41792)),x=l(83428),S=(l(41781),l(73075)),A=l.n(S),O=l(33076),k=l.n(O),w=l(16052),P=l.n(w);function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},K.apply(null,arguments)}function I(e,t){if(null==e)return{};var l={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;l[a]=e[a]}return l}const T=(0,r.createContext)(),{Provider:j,useContext:R}=T;var L="_d8lGc",V="_3kjwO",F="_dsTM2",M="_NQoX9",z="_g8QC-",D="_r3q69",W="_zEqGe",B="_ybN30",U="_4Pw75",q="_Wd4pE";const J={placeholder:"\u8bf7\u9009\u62e9",selectAll:"\u5168\u9009",selected:"\u5df2\u9009",search:"\u641c\u7d22",numberOf:"{number}\u4e2a",maxLengthError:"\u6700\u5927\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc7{maxLength}",defaultChildren:"\u4e0b\u62c9\u5185\u5bb9\uff0c\u9700\u8981\u8c03\u7528\u65b9\u5b9e\u73b0"},Q=["children"],X=e=>{let{children:t}=e,l=I(e,Q);const{open:r,value:s}=l,[c,o]=(0,a.useState)(s);(0,a.useEffect)(()=>{r&&!u()(c,s)&&o(s)},[r]);const i=Object.assign({},l,{value:c,setValue:o,onComplete:()=>l.setValue(c),onAdd:e=>l.onAdd(e,o),onSelect:e=>l.onSelect(e,o),onRemove:e=>l.onRemove(e,o),children:t});return n().createElement(j,{value:i},t(i))},Y=(0,v.createWithIntlProvider)({defaultLocale:"zh-CN",namespace:"super-select",messages:{"zh-CN":J,"en-US":{placeholder:"Please select",selectAll:"Select All",selected:"Selected",search:"Search",numberOf:"{number} items",maxLengthError:"The maximum number cannot exceed {maxLength}",defaultChildren:"Dropdown content, to be implemented by the caller"}}})((0,a.forwardRef)((e,t)=>{const l=(0,v.useIntl)(),{formatMessage:r}=l,o=Object.assign({},{children:()=>r({id:"defaultChildren"}),maxLength:null,defaultOpen:!1,single:!1,disabled:!1,isPopup:!0,placeholder:r({id:"placeholder"}),searchPlaceholder:r({id:"search"}),completeTips:null,allowSelectedAll:!1,labelKey:"label",valueKey:"value",selectedAllValue:{value:"all",label:r({id:"selectAll"})},placement:"bottomLeft",labelWrap:!1,showSelectedTag:!1,allowClear:!0,prefix:null,suffix:null,extra:null,renderModal:e=>{const{props:t,open:l,onComplete:a,onOpenChange:r}=e,{placeholder:s,children:c}=t;return n().createElement(h.Modal,{width:1e3,open:l,title:s,onCancel:()=>{r(!1)},onOk:()=>{a(),r(!1)}},c(e))}},e);o.selectedAllValue={[o.valueKey]:o.selectedAllValue.value,[o.labelKey]:o.selectedAllValue.label};const{children:p,prefix:u,suffix:d,className:g,maxLength:y,overlayClassName:C,single:N,labelWrap:_,isPopup:x,allowClear:S,disabled:A,placeholder:O,selectedAllValue:k,overlayWidth:w,placement:P,renderModal:I,labelKey:T,valueKey:R}=o,J=e=>N?(0,E.isNotEmpty)(e)?[e]:[]:Array.isArray(e)?e:[],[Q,Y]=(0,c.A)(Object.assign({},o,{onChange:e=>{o.onChange&&o.onChange(o.single?m()(e):e)}},"value"in o?{value:J(o.value)}:{defaultValue:J(o.defaultValue)})),[Z,G]=(0,a.useState)({}),[H,$]=(0,c.A)(o,{defaultValue:"defaultOpen",value:"open",onChange:"onOpenChange"}),[ee,te]=(0,a.useState)(!1),[le,ae]=(0,a.useState)(0),ne=(0,s.A)(e=>{ae(e.clientWidth)}),re=(se=Math.max(le,(e=>{if(!e)return 0;if(Number.isInteger(e))return e;const t=e.toString().match(/^\d*(\.\d*)?/);return t?Number(t[0]):0})(w)),"number"===typeof se?"".concat(se,"px"):se);var se;const{message:ce}=h.App.useApp(),oe=(e,t)=>!(Number.isInteger(t)&&t>0&&e.length>=t)||(ce.error(r({id:"maxLengthError"},{maxLength:t})),!1),ie=(e,t)=>{(t||Y)(t=>{const l=t.slice(0),a=t.findIndex(t=>t[R]===e[R]);return a>-1&&l.splice(a,1),l})},pe={props:o,value:Q,setValue:Y,searchProps:Z,setSearchProps:G,hover:ee,inputWidth:le,onAdd:(e,t)=>{(t||Y)(t=>{if(oe(t,y))return t;const l=t.slice(0);return-1===t.findIndex(t=>t[R]===e[R])&&l.push(e),l})},onRemove:ie,onSelect:(e,t)=>{(t||Y)(t=>{const l=(t||[]).slice(0),a=l.findIndex(t=>t[R]===e[R]);return-1!==a||oe(l,y)?(-1===a?l.push(e):l.splice(a,1),l):t})},open:!A&&H,onOpenChange:$,children:p},ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"===typeof pe.props.inputRender?pe.props.inputRender(e,pe):n().createElement(h.Flex,K({},e,{ref:ne,className:i()(g,L,"select-input",{[F]:_,[V]:A}),justify:"space-between",onMouseOver:()=>{te(!0)},onMouseOut:()=>{te(!1)}}),(()=>{const e="function"===typeof u?u(pe):u;return e&&n().createElement("span",{className:i()(U,"select-input-prefix"),onClick:e=>{e.stopPropagation()}},e)})(),n().createElement("div",{className:i()(M,"select-input-inner")},Q.length>0?N||Q[0][R]===k[R]?Q[0][T]:Q.map(e=>n().createElement(h.Tag,{key:e[R],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),ie(e)}},e[T])):n().createElement("span",{className:i()(D,"select-input-placeholder")},O)),n().createElement("div",{className:i()(z,"select-input-icon")},!A&&S&&ee&&Q.length>0?n().createElement(f.A,{onClick:e=>{e.stopPropagation(),Y([])}}):n().createElement(b.A,null)),(()=>{const e="function"===typeof d?d(pe):d;return e&&n().createElement("span",{className:i()(q,"select-input-suffix"),onClick:e=>{e.stopPropagation()}},e)})())};return(0,a.useImperativeHandle)(t,()=>pe),n().createElement(j,{value:pe},x?n().createElement(h.Dropdown,{open:!A&&H,onOpenChange:$,placement:P,arrow:!1,overlayClassName:i()(B,C),trigger:"click",popupRender:()=>n().createElement("div",{style:{"--overlay-width":re},className:i()(W,"over-content"),onClick:e=>{e.stopPropagation()}},p(pe))},n().createElement("span",null,ue())):n().createElement(n().Fragment,null,ue({onClick:()=>{$(!0)}}),n().createElement(X,pe,I)))}));var Z="_prlgN";const G=(0,v.createWithIntlProvider)("zh-CN",J,"super-select")(()=>{const{formatMessage:e}=(0,v.useIntl)(),{props:t,value:l,setValue:a}=R(),{unit:r,selectedAllValue:s,valueKey:c}=Object.assign({},{unit:t=>e({id:"numberOf"},{number:t})},t),o=H(l,s,c);return n().createElement(h.Flex,{justify:"space-between",className:i()(Z,"selected-all")},n().createElement(h.Flex,{gap:8},n().createElement("span",null,e({id:"selected"}),":"),n().createElement("span",null,o?s.label:"function"===typeof r?r(l.length):l.length)),n().createElement("span",null,n().createElement(h.Checkbox,{checked:o,onChange:e=>{const t=e.target.checked;a(t?[s]:[])}},e({id:"selectAll"}))))}),H=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value";return 1===(null==e?void 0:e.length)&&C()(e,"[0][".concat(l,"]"))===t[l]};var $="_l3KoW",ee="_CCPzb",te="_dKZHi",le="_oijCI",ae="_WmnnS",ne="_TMcFl";const re=(0,v.createWithIntlProvider)("zh-CN",J,"super-select")(()=>{const{formatMessage:e}=(0,v.useIntl)(),{props:t,value:l,onRemove:a}=R(),{single:r,maxLength:s,labelKey:c,valueKey:o}=Object.assign({},t);return n().createElement(h.Flex,{className:i()(ee,"selected-tag-list"),gap:8},n().createElement("div",{className:$},e({id:"selected"}),!r&&l.length>0&&"(".concat(l.length).concat(Number.isInteger(s)?"/".concat(s):"",")"),":"),n().createElement(N.A,{className:te},n().createElement(h.Flex,{gap:8,wrap:!0,className:le},l.map(e=>n().createElement(h.Tag,{className:ae,key:e[o],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),a(e)}},n().createElement("span",{className:ne},e[c]))))))});var se="_IsXdU",ce="_QD1Mz",oe="_M-mOy",ie="_KtOsz",pe="_TQhBB",ue="_2rUrh",de="_NbwX5",me="_vN2Fx",he="_6oITk",ge="_iAH9D",fe="_TCkeJ",be="_v3f23";const Ee=["children"],ve=(0,a.forwardRef)((e,t)=>{let{children:l}=e,r=I(e,Ee);const s=(0,a.useRef)(null),c=Object.assign({},{renderItemContent:e=>{let{item:t,props:l}=e;const{labelKey:a}=l;return n().createElement(n().Fragment,null,n().createElement("div",{className:"select-list-item-label"},t[a]),t.description&&n().createElement("div",{className:i()(fe,"select-list-item-description")},t.description))},renderItem:e=>{const{item:t,props:l,isSelectedAll:a,value:r,onSelect:s,setValue:c,onOpenChange:o}=e,{single:p,isPopup:u,renderItemContent:d,valueKey:m}=l,f=r.some(e=>e[m]===t[m]);return n().createElement(h.List.Item,{className:i()(ie,"select-list-item",{[pe]:f,[de]:t.disabled}),key:t[m],onClick:()=>{t.disabled||a||(p?c([t]):s(t),u&&p&&o(!1))}},!p&&n().createElement(h.Flex,null,n().createElement(h.Checkbox,{checked:a||f,disabled:a||t.disabled})),n().createElement(h.Flex,{vertical:!0,gag:8,flex:1,className:"select-list-item-content"},d(e)),p&&n().createElement("div",{className:ue},f&&n().createElement(g.A,null)))},renderList:e=>{const{props:t,isSelectedAll:l,list:a}=e,{renderItem:r}=t;return n().createElement(h.List,{className:i()(ce,{[oe]:l}),size:"small",dataSource:a,renderItem:t=>r(Object.assign({},e,{item:t}))})}},r);return n().createElement(Y,K({},c,{ref:t}),e=>{const{props:t,value:a,searchProps:r,setSearchProps:c,onOpenChange:o}=e,{footer:p,isPopup:u,getSearchProps:d,getSearchCallback:m,searchPlaceholder:g,valueKey:f,single:b,allowSelectedAll:E,showSelectedTag:v,api:y,options:C,renderList:N,selectedAllValue:S}=t,A={search:(y&&"function"===typeof d||C&&"function"===typeof m)&&n().createElement(_.A,{className:i()(ge,"select-list-search",{"is-popup":u}),placeholder:g,value:r.searchText,onSearch:e=>{c(t=>Object.assign({},t,{searchText:e}))},simple:u,showSearchButton:!u}),selectedAll:n().createElement("div",{className:i()(me,"select-list-selected-all",{"is-popup":u})},!b&&E&&n().createElement(G,null)),fetchList:n().createElement(x.h,K({},t,{className:i()(se,"select-list-scroll-list",{"is-popup":u}),searchProps:r,getSearchProps:d,api:Object.assign({},C?{data:{options:C,searchProps:r},loader:e=>{let{data:t}=e;const{options:l,searchProps:a}=t;if("function"===typeof m){return{pageData:l.filter(e=>m(a,e))}}return{pageData:l}}}:y),ref:s}),t=>{const l=H(a,S,f);return N(Object.assign({},t,e,{isSelectedAll:l}))}),selectedTag:v&&n().createElement("div",{className:i()(he,"select-list-selected-tag",{"is-popup":u})},n().createElement(re,null))};return"function"===typeof l?l(Object.assign({},e,{components:A})):n().createElement(h.Flex,{vertical:!0},A.search,A.selectedAll,A.fetchList,p&&n().createElement("div",{className:i()(be,"select-list-footer")},"function"===typeof p?p({reload:()=>{s.current&&s.current.reload()},close:()=>{o(!1)}}):p),A.selectedTag)})});var ye="_DrEYJ",Ce="_Vmbrg",Ne="_dJmfs",_e="_704J1",xe="_qU5zU",Se="_MzyWg",Ae="_5luTv",Oe="_UXi-g",ke="_iaCir",we="_JkYqS",Pe="_VZlBL",Ke="_Eiz-u",Ie="_temy6",Te="_7phL2",je="_ttNK9",Re="_xU-i7",Le="_SvfzQ",Ve="_lISfA";const Fe=(0,v.createWithIntlProvider)("zh-CN",J,"super-select")((0,a.forwardRef)((e,t)=>{const{formatMessage:l}=(0,v.useIntl)(),[r,s]=(0,a.useState)(""),c=(0,a.useRef)(),o=Object.assign({},{overlayWidth:"600px",filterRender:e=>{const{props:t,searchProps:l,setSearchProps:a}=e,{isPopup:r,searchPlaceholder:s,api:c,getSearchProps:o,options:p,getSearchCallback:u,labelKey:d}=t;return c&&"function"===typeof o||p&&"function"===typeof u?n().createElement(_.A,{className:i()(Ie,"select-list-search",{"is-popup":r}),placeholder:s,value:l.searchText||"",onSearch:e=>{a(t=>Object.assign({},t,{searchText:e}))},simple:r,showSearchButton:!r}):null},getTagSearchCallback:(e,t,l)=>{const{props:a}=l,{labelKey:n}=a;return!e||t[n].indexOf(e)>-1}},e),p=(0,a.useRef)(null);return n().createElement(Y,K({},o,{ref:t}),e=>{const{props:t,value:o,setValue:u,onSelect:d,onRemove:m,onOpenChange:f}=e,{footer:b,filterRender:E,columns:v,options:y,getSearchCallback:S,getTagSearchCallback:A,api:O,selectedAllValue:k,isPopup:w,single:P,maxLength:I,getSearchProps:T,searchPlaceholder:j,allowSelectedAll:R,labelKey:L,valueKey:V,searchProps:F}=t,M=H(o,k,V),z=b&&n().createElement("div",{className:i()(Ve,"select-table-footer")},"function"===typeof b?b({reload:()=>{c.current&&c.current.reload()},close:()=>{f(!1)}}):b);return n().createElement(h.Row,{wrap:!1,ref:p},n().createElement(h.Col,{span:P?24:16},n().createElement("div",null,E(Object.assign({},e))),n().createElement(h.Row,{wrap:!1,className:i()(Ce,"select-table-list-header")},!P&&n().createElement(h.Col,{className:i()(Ne,"select-table-list-col")},R?n().createElement(h.Checkbox,{checked:M,onChange:e=>{const t=e.target.checked;u(t?[k]:[])}}):n().createElement(h.Checkbox,{style:{visibility:"hidden"}})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},v.map(e=>{const{name:t,title:l,span:a}=e;return n().createElement(h.Col,{key:t,span:a,className:i()(Ne,"select-table-list-col")},l)})))),n().createElement(x.h,K({},t,{className:i()(ye,"select-table-list-scroll-list",{"is-popup":w}),searchProps:F,getSearchProps:T,api:Object.assign({},y?{data:{options:y,searchProps:F},loader:t=>{let{data:l}=t;const{options:a,searchProps:n}=l;if("function"===typeof S){return{pageData:a.filter(t=>S(n,t,e))}}return{pageData:a}}}:O),ref:c}),t=>{const{list:l}=t,a=Object.assign({},t,e,{isSelectedAll:M});return l.map(e=>{const t=o.some(t=>t[V]===e[V]);return n().createElement(h.Row,{wrap:!1,key:e[V],className:i()(_e,"select-table-list-body",[{[xe]:M,[Se]:t,[Ae]:e.disabled}]),onClick:()=>{e.disabled||M||(P?u([e]):d(e),w&&P&&f(!1))}},!P&&n().createElement(h.Col,{className:i()(Ne,"select-table-list-col")},n().createElement(h.Checkbox,{disabled:e.disabled||M,checked:M||t})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},v.map(t=>{const{name:l,span:r,getValueOf:s}=t;return n().createElement(h.Col,{key:l,span:r,className:i()(Ne,"select-table-list-col")},"function"===typeof s?s(e,a):C()(e,l))}))),P&&n().createElement(h.Col,{className:i()(Ne,Ke,"select-table-list-col")},t&&n().createElement(g.A,null)))})}),P&&z),!P&&n().createElement(h.Col,{className:i()(Oe,{"is-popup":w}),span:8},n().createElement(_.A,{className:Te,placeholder:j,value:r,onSearch:e=>{s(e)},showSearchButton:!1}),n().createElement(h.Row,{wrap:!1,justify:"space-between",align:"middle"},n().createElement(h.Col,null,l({id:"selected"}),o.length>0&&"(".concat(o.length).concat(Number.isInteger(I)?"/".concat(I):"",")"),":"),n().createElement(h.Col,null,n().createElement(h.Button,{className:ke,type:"link",onClick:()=>{u([])}},"\u79fb\u9664\u5168\u90e8"))),n().createElement(N.A,null,n().createElement(h.Flex,{wrap:!0,gap:8},o.filter(t=>A(r,t,e)).map(t=>n().createElement(h.Tag,{className:we,key:t[V],closable:!0,bordered:!1,onClose:e=>{e.preventDefault(),m(t)}},n().createElement(h.Popover,{getPopupContainer:()=>p.current,content:n().createElement(h.Row,{className:je},v.map(l=>{let{name:r,title:s,getValueOf:c}=l;return n().createElement(a.Fragment,{key:r},n().createElement(h.Col,{span:8,className:Re},s),n().createElement(h.Col,{className:Le,span:16},"function"===typeof c?c(t,e):C()(t,r)))}))},n().createElement("span",{className:Pe},t[L])))))),z))})}));var Me="_YTqxA",ze="_IZN7r",De="_GCIMn",We="_AYi0i",Be="_eovZv",Ue="_Tr-bO",qe="_T-hri",Je="_4XFtm",Qe="_Whlzr",Xe="_PjlnR";const Ye=["children"],Ze=["data"],Ge=A()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{parentKey:t,valueKey:l,childrenKey:a}=arguments.length>1?arguments[1]:void 0;const n=r=>r.map(r=>{const s=e.filter(e=>!k()(r[l])&&e[t]===r[l]);return Object.assign({},r,{[a]:n(s)})});return{treeData:n(e.filter(e=>!e[t])),ids:e.map(e=>e.id)}}),He=(0,a.forwardRef)((e,t)=>{let{children:l}=e,r=I(e,Ye);const s=(0,a.useRef)(null),[c,o]=(0,a.useState)([]),p=Object.assign({},{parentKey:"parentId",childrenKey:"children",renderItemContent:e=>{let{item:t,props:l}=e;const{labelKey:a}=l;return n().createElement(n().Fragment,null,n().createElement("div",{className:"select-tree-item-label"},t[a]))},renderItem:e=>{const{item:t,props:l,isSelectedAll:a,value:r,onSelect:s,setValue:c,onOpenChange:o}=e,{single:p,isPopup:u,renderItemContent:d,valueKey:m}=l,f=r.some(e=>e[m]===t[m]);return n().createElement(h.Flex,{className:i()(We,"select-tree-item",{[Be]:f,[qe]:t.disabled}),key:t[m],onClick:()=>{t.disabled||a||(p?c([t]):s(t),u&&p&&o(!1))}},!p&&n().createElement(h.Flex,null,n().createElement(h.Checkbox,{checked:a||f,disabled:a||t.disabled})),n().createElement(h.Flex,{vertical:!0,gag:8,flex:1,className:"select-tree-item-content"},d(e)),p&&n().createElement("div",{className:Ue},f&&n().createElement(g.A,null)))},renderTree:e=>{const{props:t,isSelectedAll:l,data:a}=e,{renderItem:r,valueKey:s,labelKey:p,childrenKey:u,parentKey:d}=t,{treeData:m,ids:g}=Ge(a,{valueKey:s,parentKey:d,childrenKey:u});return n().createElement(h.Tree,{className:i()(ze,{[De]:l}),showIcon:!0,selectable:!1,expandedKeys:c,fieldNames:{title:p,key:s,children:u},treeData:m,onExpand:e=>{o(e)},titleRender:t=>r(Object.assign({},e,{item:t}))})}},r);return n().createElement(Y,K({},p,{ref:t}),e=>{const{props:t,value:a,onOpenChange:r}=e,{footer:c,isPopup:o,valueKey:p,single:u,allowSelectedAll:d,showSelectedTag:m,api:g,options:f,renderTree:b,selectedAllValue:E}=t,v={selectedAll:n().createElement("div",{className:i()(Je,"select-tree-selected-all",{"is-popup":o})},!u&&d&&n().createElement(G,null)),treeList:n().createElement(P(),K({},Object.assign({},f?{data:{options:f},loader:e=>{let{data:t}=e;return t.options}}:g),{ref:s,render:t=>{let{data:l}=t,r=I(t,Ze);const s=H(a,E,p);return n().createElement(N.A,{className:i()(Me,"select-tree-scroll-list",{"is-popup":o})},b(Object.assign({},r,e,{isSelectedAll:s,data:l})))}})),selectedTag:m&&n().createElement("div",{className:i()(Qe,"select-tree-selected-tag",{"is-popup":o})},n().createElement(re,null))};return"function"===typeof l?l(Object.assign({},e,{components:v})):n().createElement(h.Flex,{vertical:!0},v.search,v.selectedAll,v.treeList,c&&n().createElement("div",{className:i()(Xe,"select-tree-footer")},"function"===typeof c?c({reload:()=>{s.current&&s.current.reload()},close:()=>{r(!1)}}):c),v.selectedTag)})})}}]);
//# sourceMappingURL=830.92bcb8af.chunk.js.map