"use strict";(self.webpackChunk_kne_components_super_select=self.webpackChunk_kne_components_super_select||[]).push([[223],{71830:(e,t,l)=>{l.r(t),l.d(t,{SelectInput:()=>W,SelectTableList:()=>we,SelectedAll:()=>$,SelectedTagList:()=>G,default:()=>ie});var a=l(94922),n=l.n(a),s=l(74946),r=l(50805),c=l(7717),o=l(54159),i=l.n(o),p=l(92679),u=l.n(p),m=l(15060),d=l.n(m),h=l(28833),g=l(7693),f=l(86340),E=l(7671),b=l(67823),v=l(33227),C=l.n(v),y=l(20046),N=(l(1251),l(41792)),_=l(83428);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},S.apply(null,arguments)}function x(e,t){if(null==e)return{};var l={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.includes(a))continue;l[a]=e[a]}return l}const k=(0,s.createContext)(),{Provider:w,useContext:A}=k;var P="_d8lGc",O="_3kjwO",j="_dsTM2",R="_NQoX9",V="_g8QC-",K="_r3q69",T="_zEqGe",I="_ybN30",L="_4Pw75",F="_Wd4pE";const D=["children"],M=e=>{let{children:t}=e,l=x(e,D);const{open:s,value:r}=l,[c,o]=(0,a.useState)(r);(0,a.useEffect)((()=>{s&&!u()(c,r)&&o(r)}),[s]);const i=Object.assign({},l,{value:c,setValue:o,onComplete:()=>l.setValue(c),onAdd:e=>l.onAdd(e,o),onSelect:e=>l.onSelect(e,o),onRemove:e=>l.onRemove(e,o),children:t});return n().createElement(w,{value:i},t(i))},W=(0,a.forwardRef)(((e,t)=>{const l=Object.assign({},{placeholder:"\u8bf7\u9009\u62e9",selectAll:"\u5168\u9009",selected:"\u5df2\u9009",search:"\u641c\u7d22",numberOf:"%s\u4e2a",maxLengthError:"\u6700\u5927\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc7%s",defaultChildren:"\u4e0b\u62c9\u5185\u5bb9\uff0c\u9700\u8981\u8c03\u7528\u65b9\u5b9e\u73b0"},e.locale),s=Object.assign({},{children:()=>l.defaultChildren,maxLength:null,single:!1,disabled:!1,isPopup:!0,defaultValue:[],placeholder:l.placeholder,searchPlaceholder:l.search,allowSelectedAll:!1,labelKey:"label",valueKey:"value",selectedAllValue:{value:"all",label:l.selectAll},placement:"bottomLeft",labelWrap:!1,showSelectedTag:!0,allowClear:!0,prefix:null,suffix:null,extra:null,renderModal:e=>{const{props:t,open:l,onComplete:a,onOpenChange:s}=e,{placeholder:r,children:c}=t;return n().createElement(h.Modal,{width:1e3,open:l,title:r,onCancel:()=>{s(!1)},onOk:()=>{a(),s(!1)}},c(e))}},e,{locale:l});s.selectedAllValue={[s.valueKey]:s.selectedAllValue.value,[s.labelKey]:s.selectedAllValue.label};const{children:o,prefix:p,suffix:u,className:m,maxLength:E,overlayClassName:v,single:C,labelWrap:y,isPopup:N,allowClear:_,disabled:x,placeholder:k,selectedAllValue:A,overlayWidth:D,placement:W,renderModal:z,labelKey:$,valueKey:B}=s,U=e=>C?(0,b.isNotEmpty)(e)?[e]:[]:Array.isArray(e)?e:[],[Q,q]=(0,c.A)(Object.assign({},s,{onChange:e=>{s.onChange&&s.onChange(s.single?d()(e):e)}},"value"in s?{value:U(s.value)}:{defaultValue:U(s.defaultValue)})),[J,X]=(0,a.useState)({}),[H,G]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)(!1),[ee,te]=(0,a.useState)(0),le=(0,r.A)((e=>{te(e.clientWidth)})),ae=(ne=Math.max(ee,(e=>{if(!e)return 0;if(Number.isInteger(e))return e;const t=e.toString().match(/^\d*(\.\d*)?/);return t?Number(t[0]):0})(D)),"number"===typeof ne?`${ne}px`:ne);var ne;const{message:se}=h.App.useApp(),re=(e,t)=>!(Number.isInteger(t)&&t>0&&e.length>=t)||(se.error(l.maxLengthError.replace("%s",t)),!1),ce=(e,t)=>{(t||q)((t=>{const l=t.slice(0),a=t.findIndex((t=>t[B]===e[B]));return a>-1&&l.splice(a,1),l}))},oe={props:s,value:Q,setValue:q,searchProps:J,setSearchProps:X,hover:Y,inputWidth:ee,onAdd:(e,t)=>{(t||q)((t=>{if(re(t,E))return t;const l=t.slice(0);return-1===t.findIndex((t=>t[B]===e[B]))&&l.push(e),l}))},onRemove:ce,onSelect:(e,t)=>{(t||q)((t=>{const l=(t||[]).slice(0),a=l.findIndex((t=>t[B]===e[B]));return-1!==a||re(l,E)?(-1===a?l.push(e):l.splice(a,1),l):t}))},open:!x&&H,onOpenChange:G,children:o},ie=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"===typeof oe.props.inputRender?oe.props.inputRender(e,oe):n().createElement(h.Flex,S({},e,{ref:le,className:i()(m,P,"select-input",{[j]:y,[O]:x}),justify:"space-between",onMouseOver:()=>{Z(!0)},onMouseOut:()=>{Z(!1)}}),(()=>{const e="function"===typeof p?p(oe):p;return e&&n().createElement("span",{className:i()(L,"select-input-prefix"),onClick:e=>{e.stopPropagation()}},e)})(),n().createElement("div",{className:i()(R,"select-input-inner")},Q.length>0?C||Q[0][B]===A[B]?Q[0][$]:Q.map((e=>n().createElement(h.Tag,{key:e[B],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),ce(e)}},e[$]))):n().createElement("span",{className:i()(K,"select-input-placeholder")},k)),n().createElement("div",{className:i()(V,"select-input-icon")},!x&&_&&Y&&Q.length>0?n().createElement(g.A,{onClick:e=>{e.stopPropagation(),q([])}}):n().createElement(f.A,null)),(()=>{const e="function"===typeof u?u(oe):u;return e&&n().createElement("span",{className:i()(F,"select-input-suffix"),onClick:e=>{e.stopPropagation()}},e)})())};return(0,a.useImperativeHandle)(t,(()=>oe)),n().createElement(w,{value:oe},N?n().createElement(h.Dropdown,{open:!x&&H,onOpenChange:G,placement:W,arrow:!1,overlayClassName:i()(I,v),trigger:"click",dropdownRender:()=>n().createElement("div",{style:{"--overlay-width":ae},className:i()(T,"over-content"),onClick:e=>{e.stopPropagation()}},o(oe))},n().createElement("span",null,ie())):n().createElement(n().Fragment,null,ie({onClick:()=>{G(!0)}}),n().createElement(M,oe,z)))}));var z="_prlgN";const $=()=>{const{props:e,value:t,setValue:l}=A(),{unit:a,selectedAllValue:s,locale:r,valueKey:c}=Object.assign({},{unit:e=>r.numberOf.replace("%s",e)},e),o=B(t,s,c);return n().createElement(h.Flex,{justify:"space-between",className:i()(z,"selected-all")},n().createElement(h.Flex,{gap:8},n().createElement("span",null,r.selected,":"),n().createElement("span",null,o?s.label:"function"===typeof a?a(t.length):t.length)),n().createElement("span",null,n().createElement(h.Checkbox,{checked:o,onChange:e=>{const t=e.target.checked;l(t?[s]:[])}},r.selectAll)))},B=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value";return 1===(null==e?void 0:e.length)&&C()(e,`[0][${l}]`)===t[l]};var U="_l3KoW",Q="_CCPzb",q="_dKZHi",J="_oijCI",X="_WmnnS",H="_TMcFl";const G=()=>{const{props:e,value:t,onRemove:l}=A(),{locale:a,single:s,maxLength:r,labelKey:c,valueKey:o}=Object.assign({},e);return n().createElement(h.Flex,{className:i()(Q,"selected-tag-list"),gap:8},n().createElement("div",{className:U},a.selected,!s&&t.length>0&&`(${t.length}${Number.isInteger(r)?`/${r}`:""})`,":"),n().createElement(y.A,{className:q},n().createElement(h.Flex,{gap:8,wrap:!0,className:J},t.map((e=>n().createElement(h.Tag,{className:X,key:e[o],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),l(e)}},n().createElement("span",{className:H},e[c])))))))};var Y="_IsXdU",Z="_QD1Mz",ee="_M-mOy",te="_KtOsz",le="_TQhBB",ae="_2rUrh",ne="_NbwX5",se="_vN2Fx",re="_6oITk",ce="_iAH9D";const oe=["children"],ie=(0,a.forwardRef)(((e,t)=>{let{children:l}=e,a=x(e,oe);const s=Object.assign({},{renderItemContent:e=>{let{item:t,props:l}=e;const{labelKey:a}=l;return n().createElement(n().Fragment,null,n().createElement("div",{className:"select-list-item-label"},t[a]),t.description&&n().createElement("div",{className:"select-list-item-description"},t.description))},renderItem:e=>{const{item:t,props:l,isSelectedAll:a,value:s,onSelect:r,setValue:c,onOpenChange:o}=e,{single:p,isPopup:u,renderItemContent:m,valueKey:d}=l,g=s.some((e=>e[d]===t[d]));return n().createElement(h.List.Item,{className:i()(te,"select-list-item",{[le]:g,[ne]:t.disabled}),key:t[d],onClick:()=>{t.disabled||a||(p?c([t]):r(t),u&&p&&o(!1))}},!p&&n().createElement(h.Flex,null,n().createElement(h.Checkbox,{checked:a||g,disabled:a||t.disabled})),n().createElement(h.Flex,{vertical:!0,gag:8,flex:1,className:"select-list-item-content"},m(e)),p&&n().createElement("div",{className:ae},g&&n().createElement(E.A,null)))},renderList:e=>{const{props:t,isSelectedAll:l,list:a}=e,{renderItem:s}=t;return n().createElement(h.List,{className:i()(Z,{[ee]:l}),size:"small",dataSource:a,renderItem:t=>s(Object.assign({},e,{item:t}))})}},a);return n().createElement(W,S({},s,{ref:t}),(e=>{const{props:t,value:a,searchProps:s,setSearchProps:r}=e,{isPopup:c,getSearchProps:o,getSearchCallback:p,searchPlaceholder:u,valueKey:m,single:d,allowSelectedAll:g,showSelectedTag:f,api:E,options:b,renderList:v,selectedAllValue:C}=t,y={search:(E&&"function"===typeof o||b&&"function"===typeof p)&&n().createElement(N.A,{className:i()(ce,"select-list-search",{"is-popup":c}),placeholder:u,value:s.searchText,onSearch:e=>{r((t=>Object.assign({},t,{searchText:e})))},simple:c,showSearchButton:!c}),selectedAll:n().createElement("div",{className:i()(se,"select-list-selected-all",{"is-popup":c})},!d&&g&&n().createElement($,null)),fetchList:n().createElement(_.h,S({},t,{className:i()(Y,"select-list-scroll-list",{"is-popup":c}),searchProps:s,getSearchProps:o,api:Object.assign({},b?{data:{options:b,searchProps:s},loader:e=>{let{data:t}=e;const{options:l,searchProps:a}=t;if("function"===typeof p){return{pageData:l.filter((e=>p(a,e)))}}return{pageData:l}}}:E)}),(t=>{const l=B(a,C,m);return v(Object.assign({},t,e,{isSelectedAll:l}))})),selectedTag:f&&n().createElement("div",{className:i()(re,"select-list-selected-tag",{"is-popup":c})},n().createElement(G,null))};return"function"===typeof l?l(Object.assign({},e,{components:y})):n().createElement(h.Flex,{vertical:!0},y.search,y.selectedAll,y.fetchList,y.selectedTag)}))}));var pe="_DrEYJ",ue="_Vmbrg",me="_dJmfs",de="_704J1",he="_qU5zU",ge="_MzyWg",fe="_5luTv",Ee="_UXi-g",be="_iaCir",ve="_JkYqS",Ce="_VZlBL",ye="_Eiz-u",Ne="_temy6",_e="_7phL2",Se="_ttNK9",xe="_xU-i7",ke="_SvfzQ";const we=(0,a.forwardRef)(((e,t)=>{const[l,s]=(0,a.useState)(""),r=Object.assign({},{overlayWidth:"600px",filterRender:e=>{const{props:t,searchProps:l,setSearchProps:a}=e,{isPopup:s,searchPlaceholder:r,api:c,getSearchProps:o,options:p,getSearchCallback:u,labelKey:m}=t;return c&&"function"===typeof o||p&&"function"===typeof u?n().createElement(N.A,{className:i()(Ne,"select-list-search",{"is-popup":s}),placeholder:r,value:l.searchText||"",onSearch:e=>{a((t=>Object.assign({},t,{searchText:e})))},simple:s,showSearchButton:!s}):null},getTagSearchCallback:(e,t,l)=>{const{props:a}=l,{labelKey:n}=a;return!e||t[n].indexOf(e)>-1}},e),c=(0,a.useRef)(null);return n().createElement(W,S({},r,{ref:t}),(e=>{const{props:t,value:r,setValue:o,onSelect:p,onRemove:u,onOpenChange:m}=e,{filterRender:d,columns:g,options:f,getSearchCallback:b,getTagSearchCallback:v,api:x,selectedAllValue:k,isPopup:w,locale:A,single:P,maxLength:O,getSearchProps:j,searchPlaceholder:R,allowSelectedAll:V,labelKey:K,valueKey:T,searchProps:I}=t,L=B(r,k,T);return n().createElement(h.Row,{wrap:!1,ref:c},n().createElement(h.Col,{span:P?24:16},n().createElement("div",null,d(Object.assign({},e))),n().createElement(h.Row,{wrap:!1,className:i()(ue,"select-table-list-header")},!P&&n().createElement(h.Col,{className:i()(me,"select-table-list-col")},V?n().createElement(h.Checkbox,{checked:L,onChange:e=>{const t=e.target.checked;o(t?[k]:[])}}):n().createElement(h.Checkbox,{style:{visibility:"hidden"}})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},g.map((e=>{const{name:t,title:l,span:a}=e;return n().createElement(h.Col,{key:t,span:a,className:i()(me,"select-table-list-col")},l)}))))),n().createElement(_.h,S({},t,{className:i()(pe,"select-table-list-scroll-list",{"is-popup":w}),searchProps:I,getSearchProps:j,api:Object.assign({},f?{data:{options:f,searchProps:I},loader:t=>{let{data:l}=t;const{options:a,searchProps:n}=l;if("function"===typeof b){return{pageData:a.filter((t=>b(n,t,e)))}}return{pageData:a}}}:x)}),(t=>{const{list:l}=t,a=Object.assign({},t,e,{isSelectedAll:L});return l.map((e=>{const t=r.some((t=>t[T]===e[T]));return n().createElement(h.Row,{wrap:!1,key:e[T],className:i()(de,"select-table-list-body",[{[he]:L,[ge]:t,[fe]:e.disabled}]),onClick:()=>{e.disabled||L||(P?o([e]):p(e),w&&P&&m(!1))}},!P&&n().createElement(h.Col,{className:i()(me,"select-table-list-col")},n().createElement(h.Checkbox,{disabled:e.disabled||L,checked:L||t})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},g.map((t=>{const{name:l,span:s,getValueOf:r}=t;return n().createElement(h.Col,{key:l,span:s,className:i()(me,"select-table-list-col")},"function"===typeof r?r(e,a):C()(e,l))})))),P&&n().createElement(h.Col,{className:i()(me,ye,"select-table-list-col")},t&&n().createElement(E.A,null)))}))}))),!P&&n().createElement(h.Col,{className:i()(Ee,{"is-popup":w}),span:8},n().createElement(N.A,{className:_e,placeholder:R,value:l,onSearch:e=>{s(e)},showSearchButton:!1}),n().createElement(h.Row,{wrap:!1,justify:"space-between",align:"middle"},n().createElement(h.Col,null,A.selected,r.length>0&&`(${r.length}${Number.isInteger(O)?`/${O}`:""})`,":"),n().createElement(h.Col,null,n().createElement(h.Button,{className:be,type:"link",onClick:()=>{o([])}},"\u79fb\u9664\u5168\u90e8"))),n().createElement(y.A,null,n().createElement(h.Flex,{wrap:!0,gap:8},r.filter((t=>v(l,t,e))).map((t=>n().createElement(h.Tag,{className:ve,key:t[T],closable:!0,bordered:!1,onClose:e=>{e.preventDefault(),u(t)}},n().createElement(h.Popover,{getPopupContainer:()=>c.current,content:n().createElement(h.Row,{className:Se},g.map((l=>{let{name:s,title:r,getValueOf:c}=l;return n().createElement(a.Fragment,{key:s},n().createElement(h.Col,{span:8,className:xe},r),n().createElement(h.Col,{className:ke,span:16},"function"===typeof c?c(t,e):C()(t,s)))})))},n().createElement("span",{className:Ce},t[K])))))))))}))}))}}]);
//# sourceMappingURL=223.71265846.chunk.js.map