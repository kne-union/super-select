"use strict";(self.webpackChunk_kne_components_super_select=self.webpackChunk_kne_components_super_select||[]).push([[223],{71830:(e,t,l)=>{l.r(t),l.d(t,{SelectInput:()=>B,SelectTableList:()=>Oe,SelectedAll:()=>J,SelectedTagList:()=>$,default:()=>me});var a=l(94922),n=l.n(a),s=l(74946),r=l(50805),c=l(7717),o=l(54159),i=l.n(o),p=l(92679),u=l.n(p),m=l(15060),d=l.n(m),h=l(28833),g=l(7693),f=l(86340),b=l(7671),E=l(67823),v=l(20274),C=l(33227),y=l.n(C),N=l(20046),_=(l(1251),l(41792)),x=l(83428);l(41781);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},S.apply(null,arguments)}function k(e,t){if(null==e)return{};var l={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;l[a]=e[a]}return l}const P=(0,s.createContext)(),{Provider:w,useContext:A}=P;var O="_d8lGc",I="_3kjwO",j="_dsTM2",T="_NQoX9",L="_g8QC-",R="_r3q69",V="_zEqGe",K="_ybN30",M="_4Pw75",z="_Wd4pE";const F={placeholder:"\u8bf7\u9009\u62e9",selectAll:"\u5168\u9009",selected:"\u5df2\u9009",search:"\u641c\u7d22",numberOf:"{number}\u4e2a",maxLengthError:"\u6700\u5927\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc7{maxLength}",defaultChildren:"\u4e0b\u62c9\u5185\u5bb9\uff0c\u9700\u8981\u8c03\u7528\u65b9\u5b9e\u73b0"},W=["children"],D=e=>{let{children:t}=e,l=k(e,W);const{open:s,value:r}=l,[c,o]=(0,a.useState)(r);(0,a.useEffect)((()=>{s&&!u()(c,r)&&o(r)}),[s]);const i=Object.assign({},l,{value:c,setValue:o,onComplete:()=>l.setValue(c),onAdd:e=>l.onAdd(e,o),onSelect:e=>l.onSelect(e,o),onRemove:e=>l.onRemove(e,o),children:t});return n().createElement(w,{value:i},t(i))},B=(0,v.createWithIntlProvider)({defaultLocale:"zh-CN",namespace:"super-select",messages:{"zh-CN":F,"en-US":{placeholder:"Please select",selectAll:"Select All",selected:"Selected",search:"Search",numberOf:"{number} items",maxLengthError:"The maximum number cannot exceed {maxLength}",defaultChildren:"Dropdown content, to be implemented by the caller"}}})((0,a.forwardRef)(((e,t)=>{const l=(0,v.useIntl)(),{formatMessage:s}=l,o=Object.assign({},{children:()=>s({id:"defaultChildren"}),maxLength:null,defaultOpen:!1,single:!1,disabled:!1,isPopup:!0,placeholder:s({id:"placeholder"}),searchPlaceholder:s({id:"search"}),completeTips:null,allowSelectedAll:!1,labelKey:"label",valueKey:"value",selectedAllValue:{value:"all",label:s({id:"selectAll"})},placement:"bottomLeft",labelWrap:!1,showSelectedTag:!1,allowClear:!0,prefix:null,suffix:null,extra:null,renderModal:e=>{const{props:t,open:l,onComplete:a,onOpenChange:s}=e,{placeholder:r,children:c}=t;return n().createElement(h.Modal,{width:1e3,open:l,title:r,onCancel:()=>{s(!1)},onOk:()=>{a(),s(!1)}},c(e))}},e);o.selectedAllValue={[o.valueKey]:o.selectedAllValue.value,[o.labelKey]:o.selectedAllValue.label};const{children:p,prefix:u,suffix:m,className:b,maxLength:C,overlayClassName:y,single:N,labelWrap:_,isPopup:x,allowClear:k,disabled:P,placeholder:A,selectedAllValue:F,overlayWidth:W,placement:B,renderModal:U,labelKey:J,valueKey:Q}=o,q=e=>N?(0,E.isNotEmpty)(e)?[e]:[]:Array.isArray(e)?e:[],[X,H]=(0,c.A)(Object.assign({},o,{onChange:e=>{o.onChange&&o.onChange(o.single?d()(e):e)}},"value"in o?{value:q(o.value)}:{defaultValue:q(o.defaultValue)})),[G,Y]=(0,a.useState)({}),[Z,$]=(0,c.A)(o,{defaultValue:"defaultOpen",value:"open",onChange:"onOpenChange"}),[ee,te]=(0,a.useState)(!1),[le,ae]=(0,a.useState)(0),ne=(0,r.A)((e=>{ae(e.clientWidth)})),se=(re=Math.max(le,(e=>{if(!e)return 0;if(Number.isInteger(e))return e;const t=e.toString().match(/^\d*(\.\d*)?/);return t?Number(t[0]):0})(W)),"number"===typeof re?"".concat(re,"px"):re);var re;const{message:ce}=h.App.useApp(),oe=(e,t)=>!(Number.isInteger(t)&&t>0&&e.length>=t)||(ce.error(s({id:"maxLengthError"},{maxLength:t})),!1),ie=(e,t)=>{(t||H)((t=>{const l=t.slice(0),a=t.findIndex((t=>t[Q]===e[Q]));return a>-1&&l.splice(a,1),l}))},pe={props:o,value:X,setValue:H,searchProps:G,setSearchProps:Y,hover:ee,inputWidth:le,onAdd:(e,t)=>{(t||H)((t=>{if(oe(t,C))return t;const l=t.slice(0);return-1===t.findIndex((t=>t[Q]===e[Q]))&&l.push(e),l}))},onRemove:ie,onSelect:(e,t)=>{(t||H)((t=>{const l=(t||[]).slice(0),a=l.findIndex((t=>t[Q]===e[Q]));return-1!==a||oe(l,C)?(-1===a?l.push(e):l.splice(a,1),l):t}))},open:!P&&Z,onOpenChange:$,children:p},ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"===typeof pe.props.inputRender?pe.props.inputRender(e,pe):n().createElement(h.Flex,S({},e,{ref:ne,className:i()(b,O,"select-input",{[j]:_,[I]:P}),justify:"space-between",onMouseOver:()=>{te(!0)},onMouseOut:()=>{te(!1)}}),(()=>{const e="function"===typeof u?u(pe):u;return e&&n().createElement("span",{className:i()(M,"select-input-prefix"),onClick:e=>{e.stopPropagation()}},e)})(),n().createElement("div",{className:i()(T,"select-input-inner")},X.length>0?N||X[0][Q]===F[Q]?X[0][J]:X.map((e=>n().createElement(h.Tag,{key:e[Q],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),ie(e)}},e[J]))):n().createElement("span",{className:i()(R,"select-input-placeholder")},A)),n().createElement("div",{className:i()(L,"select-input-icon")},!P&&k&&ee&&X.length>0?n().createElement(g.A,{onClick:e=>{e.stopPropagation(),H([])}}):n().createElement(f.A,null)),(()=>{const e="function"===typeof m?m(pe):m;return e&&n().createElement("span",{className:i()(z,"select-input-suffix"),onClick:e=>{e.stopPropagation()}},e)})())};return(0,a.useImperativeHandle)(t,(()=>pe)),n().createElement(w,{value:pe},x?n().createElement(h.Dropdown,{open:!P&&Z,onOpenChange:$,placement:B,arrow:!1,overlayClassName:i()(K,y),trigger:"click",popupRender:()=>n().createElement("div",{style:{"--overlay-width":se},className:i()(V,"over-content"),onClick:e=>{e.stopPropagation()}},p(pe))},n().createElement("span",null,ue())):n().createElement(n().Fragment,null,ue({onClick:()=>{$(!0)}}),n().createElement(D,pe,U)))})));var U="_prlgN";const J=(0,v.createWithIntlProvider)("zh-CN",F,"super-select")((()=>{const{formatMessage:e}=(0,v.useIntl)(),{props:t,value:l,setValue:a}=A(),{unit:s,selectedAllValue:r,valueKey:c}=Object.assign({},{unit:t=>e({id:"numberOf"},{number:t})},t),o=Q(l,r,c);return n().createElement(h.Flex,{justify:"space-between",className:i()(U,"selected-all")},n().createElement(h.Flex,{gap:8},n().createElement("span",null,e({id:"selected"}),":"),n().createElement("span",null,o?r.label:"function"===typeof s?s(l.length):l.length)),n().createElement("span",null,n().createElement(h.Checkbox,{checked:o,onChange:e=>{const t=e.target.checked;a(t?[r]:[])}},e({id:"selectAll"}))))})),Q=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value";return 1===(null==e?void 0:e.length)&&y()(e,"[0][".concat(l,"]"))===t[l]};var q="_l3KoW",X="_CCPzb",H="_dKZHi",G="_oijCI",Y="_WmnnS",Z="_TMcFl";const $=(0,v.createWithIntlProvider)("zh-CN",F,"super-select")((()=>{const{formatMessage:e}=(0,v.useIntl)(),{props:t,value:l,onRemove:a}=A(),{single:s,maxLength:r,labelKey:c,valueKey:o}=Object.assign({},t);return n().createElement(h.Flex,{className:i()(X,"selected-tag-list"),gap:8},n().createElement("div",{className:q},e({id:"selected"}),!s&&l.length>0&&"(".concat(l.length).concat(Number.isInteger(r)?"/".concat(r):"",")"),":"),n().createElement(N.A,{className:H},n().createElement(h.Flex,{gap:8,wrap:!0,className:G},l.map((e=>n().createElement(h.Tag,{className:Y,key:e[o],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),a(e)}},n().createElement("span",{className:Z},e[c])))))))}));var ee="_IsXdU",te="_QD1Mz",le="_M-mOy",ae="_KtOsz",ne="_TQhBB",se="_2rUrh",re="_NbwX5",ce="_vN2Fx",oe="_6oITk",ie="_iAH9D",pe="_TCkeJ";const ue=["children"],me=(0,a.forwardRef)(((e,t)=>{let{children:l}=e,a=k(e,ue);const s=Object.assign({},{renderItemContent:e=>{let{item:t,props:l}=e;const{labelKey:a}=l;return n().createElement(n().Fragment,null,n().createElement("div",{className:"select-list-item-label"},t[a]),t.description&&n().createElement("div",{className:i()(pe,"select-list-item-description")},t.description))},renderItem:e=>{const{item:t,props:l,isSelectedAll:a,value:s,onSelect:r,setValue:c,onOpenChange:o}=e,{single:p,isPopup:u,renderItemContent:m,valueKey:d}=l,g=s.some((e=>e[d]===t[d]));return n().createElement(h.List.Item,{className:i()(ae,"select-list-item",{[ne]:g,[re]:t.disabled}),key:t[d],onClick:()=>{t.disabled||a||(p?c([t]):r(t),u&&p&&o(!1))}},!p&&n().createElement(h.Flex,null,n().createElement(h.Checkbox,{checked:a||g,disabled:a||t.disabled})),n().createElement(h.Flex,{vertical:!0,gag:8,flex:1,className:"select-list-item-content"},m(e)),p&&n().createElement("div",{className:se},g&&n().createElement(b.A,null)))},renderList:e=>{const{props:t,isSelectedAll:l,list:a}=e,{renderItem:s}=t;return n().createElement(h.List,{className:i()(te,{[le]:l}),size:"small",dataSource:a,renderItem:t=>s(Object.assign({},e,{item:t}))})}},a);return n().createElement(B,S({},s,{ref:t}),(e=>{const{props:t,value:a,searchProps:s,setSearchProps:r}=e,{isPopup:c,getSearchProps:o,getSearchCallback:p,searchPlaceholder:u,valueKey:m,single:d,allowSelectedAll:g,showSelectedTag:f,api:b,options:E,renderList:v,selectedAllValue:C}=t,y={search:(b&&"function"===typeof o||E&&"function"===typeof p)&&n().createElement(_.A,{className:i()(ie,"select-list-search",{"is-popup":c}),placeholder:u,value:s.searchText,onSearch:e=>{r((t=>Object.assign({},t,{searchText:e})))},simple:c,showSearchButton:!c}),selectedAll:n().createElement("div",{className:i()(ce,"select-list-selected-all",{"is-popup":c})},!d&&g&&n().createElement(J,null)),fetchList:n().createElement(x.h,S({},t,{className:i()(ee,"select-list-scroll-list",{"is-popup":c}),searchProps:s,getSearchProps:o,api:Object.assign({},E?{data:{options:E,searchProps:s},loader:e=>{let{data:t}=e;const{options:l,searchProps:a}=t;if("function"===typeof p){return{pageData:l.filter((e=>p(a,e)))}}return{pageData:l}}}:b)}),(t=>{const l=Q(a,C,m);return v(Object.assign({},t,e,{isSelectedAll:l}))})),selectedTag:f&&n().createElement("div",{className:i()(oe,"select-list-selected-tag",{"is-popup":c})},n().createElement($,null))};return"function"===typeof l?l(Object.assign({},e,{components:y})):n().createElement(h.Flex,{vertical:!0},y.search,y.selectedAll,y.fetchList,y.selectedTag)}))}));var de="_DrEYJ",he="_Vmbrg",ge="_dJmfs",fe="_704J1",be="_qU5zU",Ee="_MzyWg",ve="_5luTv",Ce="_UXi-g",ye="_iaCir",Ne="_JkYqS",_e="_VZlBL",xe="_Eiz-u",Se="_temy6",ke="_7phL2",Pe="_ttNK9",we="_xU-i7",Ae="_SvfzQ";const Oe=(0,v.createWithIntlProvider)("zh-CN",F,"super-select")((0,a.forwardRef)(((e,t)=>{const{formatMessage:l}=(0,v.useIntl)(),[s,r]=(0,a.useState)(""),c=Object.assign({},{overlayWidth:"600px",filterRender:e=>{const{props:t,searchProps:l,setSearchProps:a}=e,{isPopup:s,searchPlaceholder:r,api:c,getSearchProps:o,options:p,getSearchCallback:u,labelKey:m}=t;return c&&"function"===typeof o||p&&"function"===typeof u?n().createElement(_.A,{className:i()(Se,"select-list-search",{"is-popup":s}),placeholder:r,value:l.searchText||"",onSearch:e=>{a((t=>Object.assign({},t,{searchText:e})))},simple:s,showSearchButton:!s}):null},getTagSearchCallback:(e,t,l)=>{const{props:a}=l,{labelKey:n}=a;return!e||t[n].indexOf(e)>-1}},e),o=(0,a.useRef)(null);return n().createElement(B,S({},c,{ref:t}),(e=>{const{props:t,value:c,setValue:p,onSelect:u,onRemove:m,onOpenChange:d}=e,{filterRender:g,columns:f,options:E,getSearchCallback:v,getTagSearchCallback:C,api:k,selectedAllValue:P,isPopup:w,single:A,maxLength:O,getSearchProps:I,searchPlaceholder:j,allowSelectedAll:T,labelKey:L,valueKey:R,searchProps:V}=t,K=Q(c,P,R);return n().createElement(h.Row,{wrap:!1,ref:o},n().createElement(h.Col,{span:A?24:16},n().createElement("div",null,g(Object.assign({},e))),n().createElement(h.Row,{wrap:!1,className:i()(he,"select-table-list-header")},!A&&n().createElement(h.Col,{className:i()(ge,"select-table-list-col")},T?n().createElement(h.Checkbox,{checked:K,onChange:e=>{const t=e.target.checked;p(t?[P]:[])}}):n().createElement(h.Checkbox,{style:{visibility:"hidden"}})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},f.map((e=>{const{name:t,title:l,span:a}=e;return n().createElement(h.Col,{key:t,span:a,className:i()(ge,"select-table-list-col")},l)}))))),n().createElement(x.h,S({},t,{className:i()(de,"select-table-list-scroll-list",{"is-popup":w}),searchProps:V,getSearchProps:I,api:Object.assign({},E?{data:{options:E,searchProps:V},loader:t=>{let{data:l}=t;const{options:a,searchProps:n}=l;if("function"===typeof v){return{pageData:a.filter((t=>v(n,t,e)))}}return{pageData:a}}}:k)}),(t=>{const{list:l}=t,a=Object.assign({},t,e,{isSelectedAll:K});return l.map((e=>{const t=c.some((t=>t[R]===e[R]));return n().createElement(h.Row,{wrap:!1,key:e[R],className:i()(fe,"select-table-list-body",[{[be]:K,[Ee]:t,[ve]:e.disabled}]),onClick:()=>{e.disabled||K||(A?p([e]):u(e),w&&A&&d(!1))}},!A&&n().createElement(h.Col,{className:i()(ge,"select-table-list-col")},n().createElement(h.Checkbox,{disabled:e.disabled||K,checked:K||t})),n().createElement(h.Col,{flex:1},n().createElement(h.Row,{wrap:!1},f.map((t=>{const{name:l,span:s,getValueOf:r}=t;return n().createElement(h.Col,{key:l,span:s,className:i()(ge,"select-table-list-col")},"function"===typeof r?r(e,a):y()(e,l))})))),A&&n().createElement(h.Col,{className:i()(ge,xe,"select-table-list-col")},t&&n().createElement(b.A,null)))}))}))),!A&&n().createElement(h.Col,{className:i()(Ce,{"is-popup":w}),span:8},n().createElement(_.A,{className:ke,placeholder:j,value:s,onSearch:e=>{r(e)},showSearchButton:!1}),n().createElement(h.Row,{wrap:!1,justify:"space-between",align:"middle"},n().createElement(h.Col,null,l({id:"selected"}),c.length>0&&"(".concat(c.length).concat(Number.isInteger(O)?"/".concat(O):"",")"),":"),n().createElement(h.Col,null,n().createElement(h.Button,{className:ye,type:"link",onClick:()=>{p([])}},"\u79fb\u9664\u5168\u90e8"))),n().createElement(N.A,null,n().createElement(h.Flex,{wrap:!0,gap:8},c.filter((t=>C(s,t,e))).map((t=>n().createElement(h.Tag,{className:Ne,key:t[R],closable:!0,bordered:!1,onClose:e=>{e.preventDefault(),m(t)}},n().createElement(h.Popover,{getPopupContainer:()=>o.current,content:n().createElement(h.Row,{className:Pe},f.map((l=>{let{name:s,title:r,getValueOf:c}=l;return n().createElement(a.Fragment,{key:s},n().createElement(h.Col,{span:8,className:we},r),n().createElement(h.Col,{className:Ae,span:16},"function"===typeof c?c(t,e):y()(t,s)))})))},n().createElement("span",{className:_e},t[L])))))))))}))})))}}]);
//# sourceMappingURL=223.85e96324.chunk.js.map