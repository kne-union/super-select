"use strict";(self.webpackChunk_kne_components_super_select=self.webpackChunk_kne_components_super_select||[]).push([[830],{71830:(e,t,l)=>{l.r(t),l.d(t,{SelectInput:()=>G,SelectTableList:()=>Se,SelectTree:()=>Fe,SelectedAll:()=>J,SelectedTagList:()=>se,default:()=>Ce});var a=l(94922),n=l.n(a),r=l(74946),s=l(50805),c=l(7717),o=l(54159),i=l.n(o),p=l(92679),d=l.n(p),u=l(15060),m=l.n(u),h=l(28833),g=l(7671),f=l(7693),v=l(86340),E=l(67823),b=l(20274),y=l(33227),C=l.n(y),N=l(20046),S=(l(1251),l(41792)),_=l(83428),A=(l(41781),l(60657)),x=(l(78834),l(73075)),O=l.n(x),P=l(33076),k=l.n(P),w=l(16052),K=l.n(w);function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},I.apply(null,arguments)}function T(e,t){if(null==e)return{};var l={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;l[a]=e[a]}return l}const j=(0,r.createContext)(),{Provider:R,useContext:L}=j;var F="_d8lGc",V="_3kjwO",D="_dsTM2",M="_NQoX9",W="_g8QC-",z="_r3q69",B="_zEqGe",Q="_ybN30",X="_4Pw75",U="_Wd4pE";const Z={placeholder:"\u8bf7\u9009\u62e9",selectAll:"\u5168\u9009",selected:"\u5df2\u9009",search:"\u641c\u7d22",numberOf:"{number}\u4e2a",maxLengthError:"\u6700\u5927\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc7{maxLength}",defaultChildren:"\u4e0b\u62c9\u5185\u5bb9\uff0c\u9700\u8981\u8c03\u7528\u65b9\u5b9e\u73b0",removeAll:"\u79fb\u9664\u5168\u90e8"},q=["children"],Y=e=>{let{children:t}=e,l=T(e,q);const{open:r,value:s}=l,[c,o]=(0,a.useState)(s);(0,a.useEffect)(()=>{r&&!d()(c,s)&&o(s)},[r]);const i=Object.assign({},l,{value:c,setValue:o,onComplete:()=>l.setValue(c),onAdd:e=>l.onAdd(e,o),onSelect:e=>l.onSelect(e,o),onRemove:e=>l.onRemove(e,o),children:t});return n().createElement(R,{value:i},t(i))},G=(0,b.createWithIntlProvider)({defaultLocale:"zh-CN",namespace:"super-select",messages:{"zh-CN":Z,"en-US":{placeholder:"Please select",selectAll:"Select All",selected:"Selected",search:"Search",numberOf:"{number} items",maxLengthError:"The maximum number cannot exceed {maxLength}",defaultChildren:"Dropdown content, to be implemented by the caller",removeAll:"Remove All"}}})((0,a.forwardRef)((e,t)=>{const l=(0,b.useIntl)(),{formatMessage:r}=l,o=Object.assign({},{children:()=>r({id:"defaultChildren"}),maxLength:null,defaultOpen:!1,single:!1,disabled:!1,isPopup:!0,placeholder:r({id:"placeholder"}),searchPlaceholder:r({id:"search"}),completeTips:null,allowSelectedAll:!1,labelKey:"label",valueKey:"value",selectedAllValue:{value:"all",label:r({id:"selectAll"})},placement:"bottomLeft",labelWrap:!1,showSelectedTag:!1,allowClear:!0,prefix:null,suffix:null,extra:null,renderModal:e=>{const{props:t,open:l,onComplete:a,onOpenChange:r}=e,{placeholder:s,children:c}=t;return n().createElement(h.Modal,{width:1e3,open:l,title:s,onCancel:()=>{r(!1)},onOk:()=>{a(),r(!1)}},c(e))}},e);o.selectedAllValue={[o.valueKey]:o.selectedAllValue.value,[o.labelKey]:o.selectedAllValue.label};const{children:p,prefix:d,suffix:u,className:g,maxLength:y,overlayClassName:C,single:N,labelWrap:S,isPopup:_,allowClear:A,disabled:x,placeholder:O,selectedAllValue:P,overlayWidth:k,placement:w,renderModal:K,labelKey:T,valueKey:j}=o,L=e=>N?(0,E.isNotEmpty)(e)?[e]:[]:Array.isArray(e)?e:[],[Z,q]=(0,c.A)(Object.assign({},o,{onChange:e=>{o.onChange&&o.onChange(o.single?m()(e):e)}},"value"in o?{value:L(o.value)}:{defaultValue:L(o.defaultValue)})),[G,H]=(0,a.useState)({}),[J,$]=(0,c.A)(o,{defaultValue:"defaultOpen",value:"open",onChange:"onOpenChange"}),[ee,te]=(0,a.useState)(!1),[le,ae]=(0,a.useState)(0),ne=(0,s.A)(e=>{ae(e.clientWidth)}),re=(se=Math.max(le,(e=>{if(!e)return 0;if(Number.isInteger(e))return e;const t=e.toString().match(/^\d*(\.\d*)?/);return t?Number(t[0]):0})(k)),"number"===typeof se?"".concat(se,"px"):se);var se;const{message:ce}=h.App.useApp(),oe=(e,t)=>!(Number.isInteger(t)&&t>0&&e.length>=t)||(ce.error(r({id:"maxLengthError"},{maxLength:t})),!1),ie=(e,t)=>{(t||q)(t=>{const l=t.slice(0),a=t.findIndex(t=>t[j]===e[j]);return a>-1&&l.splice(a,1),l})},pe={props:o,value:Z,setValue:q,searchProps:G,setSearchProps:H,hover:ee,inputWidth:le,onAdd:(e,t)=>{(t||q)(t=>{if(oe(t,y))return t;const l=t.slice(0);return-1===t.findIndex(t=>t[j]===e[j])&&l.push(e),l})},onRemove:ie,onSelect:(e,t)=>{(t||q)(t=>{const l=(t||[]).slice(0),a=l.findIndex(t=>t[j]===e[j]);return-1!==a||oe(l,y)?(-1===a?l.push(e):l.splice(a,1),l):t})},open:!x&&J,onOpenChange:$,children:p},de=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"===typeof pe.props.inputRender?pe.props.inputRender(e,pe):n().createElement(h.Flex,I({},e,{ref:ne,className:i()(g,F,"select-input",{[D]:S,[V]:x}),justify:"space-between",onMouseOver:()=>{te(!0)},onMouseOut:()=>{te(!1)}}),(()=>{const e="function"===typeof d?d(pe):d;return e&&n().createElement("span",{className:i()(X,"select-input-prefix"),onClick:e=>{e.stopPropagation()}},e)})(),n().createElement("div",{className:i()(M,"select-input-inner")},Z.length>0?N||Z[0][j]===P[j]?Z[0][T]:Z.map(e=>n().createElement(h.Tag,{key:e[j],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),ie(e)}},e[T])):n().createElement("span",{className:i()(z,"select-input-placeholder")},O)),n().createElement("div",{className:i()(W,"select-input-icon")},!x&&A&&ee&&Z.length>0?n().createElement(f.A,{onClick:e=>{e.stopPropagation(),q([])}}):n().createElement(v.A,null)),(()=>{const e="function"===typeof u?u(pe):u;return e&&n().createElement("span",{className:i()(U,"select-input-suffix"),onClick:e=>{e.stopPropagation()}},e)})())};return(0,a.useImperativeHandle)(t,()=>pe),o.renderContent&&"function"===typeof o.renderContent?o.renderContent(p(pe)):n().createElement(R,{value:pe},_?n().createElement(h.Dropdown,{open:!x&&J,onOpenChange:$,placement:w,arrow:!1,overlayClassName:i()(Q,C),trigger:"click",popupRender:()=>n().createElement("div",{style:{"--overlay-width":re},className:i()(B,"over-content"),onClick:e=>{e.stopPropagation()}},p(pe))},n().createElement("span",null,de())):n().createElement(n().Fragment,null,de({onClick:()=>{$(!0)}}),n().createElement(Y,pe,K)))}));var H="_prlgN";const J=(0,b.createWithIntlProvider)("zh-CN",Z,"super-select")(()=>{const{formatMessage:e}=(0,b.useIntl)(),{props:t,value:l,setValue:a}=L(),{unit:r,selectedAllValue:s,valueKey:c}=Object.assign({},{unit:t=>e({id:"numberOf"},{number:t})},t),o=$(l,s,c);return n().createElement(h.Flex,{justify:"space-between",className:i()(H,"selected-all")},n().createElement(h.Flex,{gap:8},n().createElement("span",null,e({id:"selected"}),":"),n().createElement("span",null,o?s.label:"function"===typeof r?r(l.length):l.length)),n().createElement("span",null,n().createElement(h.Checkbox,{checked:o,onChange:e=>{const t=e.target.checked;a(t?[s]:[])}},e({id:"selectAll"}))))}),$=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value";return 1===(null==e?void 0:e.length)&&C()(e,"[0][".concat(l,"]"))===t[l]};var ee="_l3KoW",te="_CCPzb",le="_dKZHi",ae="_oijCI",ne="_WmnnS",re="_TMcFl";const se=(0,b.createWithIntlProvider)("zh-CN",Z,"super-select")(()=>{const{formatMessage:e}=(0,b.useIntl)(),{props:t,value:l,onRemove:a}=L(),{single:r,maxLength:s,labelKey:c,valueKey:o}=Object.assign({},t);return n().createElement(h.Flex,{className:i()(te,"selected-tag-list"),gap:8},n().createElement("div",{className:ee},e({id:"selected"}),!r&&l.length>0&&"(".concat(l.length).concat(Number.isInteger(s)?"/".concat(s):"",")"),":"),n().createElement(N.A,{className:le},n().createElement(h.Flex,{gap:8,wrap:!0,className:ae},l.map(e=>n().createElement(h.Tag,{className:ne,key:e[o],closable:!0,bordered:!1,onClose:t=>{t.preventDefault(),a(e)}},n().createElement("span",{className:re},e[c]))))))});var ce="_IsXdU",oe="_SQZ8k",ie="_QD1Mz",pe="_M-mOy",de="_KtOsz",ue="_TQhBB",me="_2rUrh",he="_NbwX5",ge="_vN2Fx",fe="_6oITk",ve="_iAH9D",Ee="_TCkeJ",be="_v3f23";const ye=["children"],Ce=(0,a.forwardRef)((e,t)=>{let{children:l}=e,r=T(e,ye);const s=(0,a.useRef)(null),c=Object.assign({},{renderItemContent:e=>{let{item:t,props:l}=e;const{labelKey:a}=l;return n().createElement(n().Fragment,null,n().createElement("div",{className:"select-list-item-label"},t[a]),t.description&&n().createElement("div",{className:i()(Ee,"select-list-item-description")},t.description))},renderItem:e=>{const{item:t,props:l,isSelectedAll:a,value:r,onSelect:s,setValue:c,onOpenChange:o}=e,{single:p,isPopup:d,renderItemContent:u,valueKey:m}=l,f=r.some(e=>e[m]===t[m]);return n().createElement(h.List.Item,{className:i()(de,"select-list-item",{[ue]:f,[he]:t.disabled}),key:t[m],onClick:()=>{t.disabled||a||(p?c([t]):s(t),d&&p&&o(!1))}},!p&&n().createElement(h.Flex,null,n().createElement(h.Checkbox,{checked:a||f,disabled:a||t.disabled})),n().createElement(h.Flex,{vertical:!0,gag:8,flex:1,className:"select-list-item-content"},u(e)),p&&n().createElement("div",{className:me},f&&n().createElement(g.A,null)))},renderList:e=>{const{props:t,isSelectedAll:l,list:a}=e,{renderItem:r}=t;return a&&a.length>0?n().createElement(h.List,{className:i()(ie,{[pe]:l}),size:"small",dataSource:a,renderItem:t=>r(Object.assign({},e,{item:t}))}):t.empty||n().createElement(h.Empty,{className:oe})}},r);return n().createElement(G,I({},c,{ref:t}),e=>{const{props:t,value:a,searchProps:r,setSearchProps:c,onOpenChange:o}=e,{footer:p,isPopup:d,getSearchProps:u,getSearchCallback:m,searchPlaceholder:g,valueKey:f,single:v,allowSelectedAll:E,showSelectedTag:b,api:y,options:C,renderList:N,selectedAllValue:A}=t,x={search:(y&&"function"===typeof u||C&&"function"===typeof m)&&n().createElement(S.A,{className:i()(ve,"select-list-search",{"is-popup":d}),placeholder:g,value:r.searchText,onSearch:e=>{c(t=>Object.assign({},t,{searchText:e}))},simple:d,showSearchButton:!d}),selectedAll:n().createElement("div",{className:i()(ge,"select-list-selected-all",{"is-popup":d})},!v&&E&&n().createElement(J,null)),fetchList:n().createElement(_.h,I({},t,{className:i()(ce,"select-list-scroll-list",{"is-popup":d}),searchProps:r,getSearchProps:u,api:Object.assign({},C?{data:{options:C,searchProps:r},loader:e=>{let{data:t}=e;const{options:l,searchProps:a}=t;if("function"===typeof m){return{pageData:l.filter(e=>m(a,e))}}return{pageData:l}}}:y),ref:s}),t=>{const l=$(a,A,f);return N(Object.assign({},t,e,{isSelectedAll:l}))}),selectedTag:b&&n().createElement("div",{className:i()(fe,"select-list-selected-tag",{"is-popup":d})},n().createElement(se,null)),footer:p&&n().createElement("div",{className:i()(be,"select-list-footer")},"function"===typeof p?p({reload:()=>{s.current&&s.current.reload()},close:()=>{o(!1)}}):p)};return"function"===typeof l?l(Object.assign({},e,{components:x})):n().createElement(h.Flex,{vertical:!0},x.search,x.selectedAll,x.fetchList,x.footer,x.selectedTag)})});var Ne={list:"_DrEYJ","is-popup":"_KgWTX",empty:"_5Tyrt",table:"_zE-14","right-options":"_UXi-g","no-padding-btn":"_iaCir",tag:"_JkYqS","tag-inner":"_VZlBL","single-checked":"_Eiz-u","select-search":"_temy6","tags-search":"_7phL2",descriptions:"_ttNK9","descriptions-col-label":"_xU-i7","descriptions-col-content":"_SvfzQ",footer:"_lISfA"};const Se=(0,b.createWithIntlProvider)("zh-CN",Z,"super-select")((0,a.forwardRef)((e,t)=>{const{formatMessage:l}=(0,b.useIntl)(),[r,s]=(0,a.useState)(""),c=(0,a.useRef)(),o=Object.assign({},{overlayWidth:"600px",filterRender:e=>{const{props:t,searchProps:l,setSearchProps:a}=e,{isPopup:r,searchPlaceholder:s,api:c,getSearchProps:o,options:p,getSearchCallback:d,labelKey:u}=t;return c&&"function"===typeof o||p&&"function"===typeof d?n().createElement(S.A,{className:i()(Ne["select-search"],"select-table-search",{"is-popup":r}),placeholder:s,value:l.searchText||"",onSearch:e=>{a(t=>Object.assign({},t,{searchText:e}))},simple:r,showSearchButton:!r}):null},getTagSearchCallback:(e,t,l)=>{const{props:a}=l,{labelKey:n}=a;return!e||t[n].indexOf(e)>-1}},e),p=(0,a.useRef)(null);return n().createElement(G,I({},o,{ref:t}),e=>{const{props:t,value:o,setValue:d,onSelect:u,onRemove:m,onOpenChange:g,searchProps:f}=e,{footer:v,filterRender:E,columns:b,options:y,getSearchProps:x,getSearchCallback:O,getTagSearchCallback:P,api:k,selectedAllValue:w,isPopup:K,single:T,maxLength:j,searchPlaceholder:R,allowSelectedAll:L,labelKey:F,valueKey:V}=t,D=$(o,w,V),M=v&&n().createElement("div",{className:i()(Ne.footer,"select-table-footer")},"function"===typeof v?v({reload:()=>{c.current&&c.current.reload()},close:()=>{g(!1)}}):v);return n().createElement(h.Row,{wrap:!1,ref:p},n().createElement(h.Col,{className:i()({[Ne["single-body"]]:T}),span:T?24:16},n().createElement("div",null,E(Object.assign({},e))),n().createElement("div",{className:i()(Ne.table,"select-table")},n().createElement(A.Qg,{columns:b,rowKey:V,rowSelection:{allowSelectedAll:L,isSelectedAll:D,onIsSelectAllChange:e=>{d(e?[w]:[])},type:T?"radio":"checkbox",selectedRowKeys:(o||[]).map(e=>e[V]),onChange:(e,t)=>{d(t),K&&T&&g(!1)}},render:l=>{let{header:a,renderBody:r}=l;return n().createElement(n().Fragment,null,a,n().createElement(_.h,I({},t,{className:i()(Ne.list,"select-table-list-scroll-list",{"is-popup":K}),searchProps:f,getSearchProps:x,api:Object.assign({},y?{data:{options:y,searchProps:f},loader:t=>{let{data:l}=t;const{options:a,searchProps:n}=l;if("function"===typeof O){return{pageData:a.filter(t=>O(n,t,e))}}return{pageData:a}}}:k),ref:c}),l=>{const{list:a}=l,s=Object.assign({},l,e,{isSelectedAll:D});return a&&a.length>0?r(a,s):t.empty||n().createElement(h.Empty,{className:i()(Ne.empty)})}))}})),T&&M||n().createElement("div",{className:i()(Ne.footer,"select-table-footer")})),!T&&n().createElement(h.Col,{className:i()(Ne["right-options"],{"is-popup":K}),span:8},n().createElement(S.A,{className:Ne["tags-search"],placeholder:R,value:r,onSearch:e=>{s(e)},showSearchButton:!1}),n().createElement(h.Row,{wrap:!1,justify:"space-between",align:"middle"},n().createElement(h.Col,null,l({id:"selected"}),o.length>0&&"(".concat(o.length).concat(Number.isInteger(j)?"/".concat(j):"",")"),":"),n().createElement(h.Col,null,n().createElement(h.Button,{className:Ne["no-padding-btn"],type:"link",onClick:()=>{d([])}},l({id:"removeAll"})))),n().createElement(N.A,null,n().createElement(h.Flex,{wrap:!0,gap:8},o.filter(t=>P(r,t,e)).map(t=>n().createElement(h.Tag,{className:Ne.tag,key:t[V],closable:!0,bordered:!1,onClose:e=>{e.preventDefault(),m(t)}},n().createElement(h.Popover,{getPopupContainer:()=>p.current,content:n().createElement(h.Row,{className:Ne.descriptions},b.map(l=>{let{name:r,title:s,getValueOf:c}=l;return n().createElement(a.Fragment,{key:r},n().createElement(h.Col,{span:8,className:Ne["descriptions-col-label"]},s),n().createElement(h.Col,{className:Ne["descriptions-col-content"],span:16},"function"===typeof c?c(t,e):C()(t,r)))}))},n().createElement("span",{className:Ne["tag-inner"]},t[F])))))),M))})}));var _e="_YTqxA",Ae="_IZN7r",xe="_GCIMn",Oe="_AYi0i",Pe="_eovZv",ke="_Tr-bO",we="_T-hri",Ke="_4XFtm",Ie="_Whlzr",Te="_PjlnR";const je=["children"],Re=["data"],Le=O()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{parentKey:t,valueKey:l,childrenKey:a}=arguments.length>1?arguments[1]:void 0;const n=r=>r.map(r=>{const s=e.filter(e=>!k()(r[l])&&e[t]===r[l]);return Object.assign({},r,{[a]:n(s)})});return{treeData:n(e.filter(e=>!e[t])),ids:e.map(e=>e.id)}}),Fe=(0,a.forwardRef)((e,t)=>{let{children:l}=e,r=T(e,je);const s=(0,a.useRef)(null),[c,o]=(0,a.useState)([]),p=Object.assign({},{parentKey:"parentId",childrenKey:"children",renderItemContent:e=>{let{item:t,props:l}=e;const{labelKey:a}=l;return n().createElement(n().Fragment,null,n().createElement("div",{className:"select-tree-item-label"},t[a]))},renderItem:e=>{const{item:t,props:l,isSelectedAll:a,value:r,onSelect:s,setValue:c,onOpenChange:o}=e,{single:p,isPopup:d,renderItemContent:u,valueKey:m}=l,f=r.some(e=>e[m]===t[m]);return n().createElement(h.Flex,{className:i()(Oe,"select-tree-item",{[Pe]:f,[we]:t.disabled}),key:t[m],onClick:()=>{t.disabled||a||(p?c([t]):s(t),d&&p&&o(!1))}},!p&&n().createElement(h.Flex,null,n().createElement(h.Checkbox,{checked:a||f,disabled:a||t.disabled})),n().createElement(h.Flex,{vertical:!0,gag:8,flex:1,className:"select-tree-item-content"},u(e)),p&&n().createElement("div",{className:ke},f&&n().createElement(g.A,null)))},renderTree:e=>{const{props:t,isSelectedAll:l,data:a}=e,{renderItem:r,valueKey:s,labelKey:p,childrenKey:d,parentKey:u}=t,{treeData:m,ids:g}=Le(a,{valueKey:s,parentKey:u,childrenKey:d});return m&&m.length>0?n().createElement(h.Tree,{className:i()(Ae,{[xe]:l}),showIcon:!0,selectable:!1,expandedKeys:c,fieldNames:{title:p,key:s,children:d},treeData:m,onExpand:e=>{o(e)},titleRender:t=>r(Object.assign({},e,{item:t}))}):t.empty||n().createElement(h.Empty,null)}},r);return n().createElement(G,I({},p,{ref:t}),e=>{const{props:t,value:a,onOpenChange:r}=e,{footer:c,isPopup:o,valueKey:p,single:d,allowSelectedAll:u,showSelectedTag:m,api:g,options:f,renderTree:v,selectedAllValue:E}=t,b={selectedAll:n().createElement("div",{className:i()(Ke,"select-tree-selected-all",{"is-popup":o})},!d&&u&&n().createElement(J,null)),treeList:n().createElement(K(),I({},Object.assign({},f?{data:{options:f},loader:e=>{let{data:t}=e;return t.options}}:g),{ref:s,render:t=>{let{data:l}=t,r=T(t,Re);const s=$(a,E,p);return n().createElement(N.A,{className:i()(_e,"select-tree-scroll-list",{"is-popup":o})},v(Object.assign({},r,e,{isSelectedAll:s,data:l})))}})),selectedTag:m&&n().createElement("div",{className:i()(Ie,"select-tree-selected-tag",{"is-popup":o})},n().createElement(se,null)),footer:c&&n().createElement("div",{className:i()(Te,"select-list-footer")},"function"===typeof c?c({reload:()=>{s.current&&s.current.reload()},close:()=>{r(!1)}}):c)};return"function"===typeof l?l(Object.assign({},e,{components:b})):n().createElement(h.Flex,{vertical:!0},b.search,b.selectedAll,b.treeList,b.footer,b.selectedTag)})})}}]);
//# sourceMappingURL=830.0a369139.chunk.js.map